{"ast":null,"code":"var _jsxFileName = \"/Users/sychen/thesis-app/packages/react-app/src/components/PolicyInputPanel/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { ethers } from \"ethers\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport styled from 'styled-components';\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\nimport ipfs from '../../ipfs';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport FacebookLogin from 'react-facebook-login';\nimport PolicyIcon from '@material-ui/icons/Policy';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport FacebookIcon from '@material-ui/icons/Facebook';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport { DateTimePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from '@date-io/date-fns'; // choose your lib\n\nimport Backdrop from '@material-ui/core/Backdrop';\nconst useStyles = makeStyles(theme => ({\n  container: {\n    marginTop: \"20px\",\n    width: '800px',\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    backgroundColor: 'white',\n    padding: '30px 30px 30px 30px',\n    borderRadius: '10px'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 200\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(3)\n  }\n}));\nexport default function PolicyInputPanel() {\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false);\n  const [policyName, setPolicyName] = useState(0);\n  const [policyType, setPolicyType] = useState(0);\n  const [policyContent, setPolicyContent] = useState('');\n  const [policyPremium, setPolicyPremium] = useState(0);\n  const [policyStart, setPolicyStart] = useState(new Date());\n  const [policyEnd, setPolicyEnd] = useState(new Date());\n  const [policyDeadline, setPolicyDeadline] = useState(new Date());\n  const [buffer, setBuffer] = useState('');\n  const [contentHash, setContentHash] = useState('');\n  const [login, setLogin] = useState(false);\n  const [data, setData] = useState({});\n\n  const responseFacebook = response => {\n    console.log(response);\n    setData(response);\n\n    if (response.accessToken) {\n      setLogin(true);\n    } else {\n      setLogin(false);\n    }\n  };\n\n  function dateToUnix(value) {\n    const date = new Date(value);\n    return date.getTime();\n  }\n\n  const captureFile = async event => {\n    console.log('capture file...');\n    event.preventDefault();\n    const file = event.target.files[0];\n    const reader = new window.FileReader();\n    reader.readAsArrayBuffer(file);\n\n    reader.onloadend = () => {\n      setBuffer(Buffer.from(reader.result));\n    }; // upload\n\n\n    let data = buffer;\n    console.log('Submit this: ', data);\n    const postResponse = await ipfs.add(data);\n    console.log(\"hash: \", postResponse['path']);\n    setPolicyContent(postResponse['path']);\n  };\n\n  async function createPolicy() {\n    try {\n      console.log(ethers.utils.parseEther(policyPremium));\n      console.log(dateToUnix(policyStart), dateToUnix(policyEnd));\n      console.log(dateToUnix(policyDeadline));\n      let tx;\n      setLoading(true);\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const policyFactoryContract = new Contract(addresses[RINKEBY_ID].policyFactory, abis.policyFactory, signer);\n      console.log(policyFactoryContract);\n      tx = await policyFactoryContract.createPolicy(policyName, policyType, ethers.utils.parseEther(policyPremium), dateToUnix(policyStart), dateToUnix(policyEnd), policyContent, dateToUnix(policyDeadline)); // until transactionHash is mined.\n\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      console.log(tx);\n    } catch (err) {\n      console.log(err);\n    }\n\n    setLoading(false);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Backdrop, {\n    className: classes.backdrop,\n    open: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n    utils: DateFnsUtils,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FacebookLogin, {\n    appId: \"360104115420180\",\n    autoLoad: false,\n    fields: \"name,email\",\n    scope: \"public_profile\",\n    size: \"small\",\n    callback: responseFacebook,\n    icon: \"fa-facebook\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    id: \"Proposer\",\n    label: \"Proposer\",\n    value: data.name,\n    disabled: true,\n    fullWidth: true,\n    InputProps: {\n      startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        position: \"start\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(AccountCircle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 19\n        }\n      }))\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    id: \"UserId\",\n    label: \"UserId\",\n    value: data.id,\n    disabled: true,\n    fullWidth: true,\n    InputProps: {\n      startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        position: \"start\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(FacebookIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }\n      }))\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    id: \"policyName\",\n    label: \"Title\",\n    onChange: e => setPolicyName(e.target.value),\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"standard-select-type\",\n    required: true,\n    select: true,\n    label: \"Type\",\n    value: policyType,\n    onChange: e => setPolicyType(e.target.value),\n    helperText: \"Please select your insurance type\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"Cyper Insurance\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }, \"Cyper Insurance\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"Health Insurance\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  }, \"Health Insurance\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"Investment Insurance\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }, \"Investment Insurance\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"Auto Insurance\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }\n  }, \"Auto Insurance\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DateTimePicker, {\n    value: policyStart,\n    disablePast: true,\n    onChange: e => setPolicyStart(e),\n    label: \"Start time\",\n    showTodayButton: true,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DateTimePicker, {\n    value: policyEnd,\n    disablePast: true,\n    onChange: e => setPolicyEnd(e),\n    label: \"End time\",\n    showTodayButton: true,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DateTimePicker, {\n    value: policyDeadline,\n    disablePast: true,\n    onChange: e => setPolicyDeadline(e),\n    label: \"Deadline\",\n    showTodayButton: true,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 9,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    id: \"policyContent\",\n    name: \"policyContent\",\n    label: \"Content Hash\",\n    value: policyContent,\n    disabled: true,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \".pdf,.word,.jpg\",\n    className: classes.input,\n    style: {\n      display: 'none'\n    },\n    id: \"contained-button-file\",\n    multiple: true,\n    onChange: e => captureFile(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"contained-button-file\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    component: \"span\",\n    className: classes.button,\n    startIcon: /*#__PURE__*/React.createElement(CloudUploadIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 96\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 13\n    }\n  }, \"Upload Policy\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    required: true,\n    id: \"Policypremium\",\n    name: \"Policypremium\",\n    label: \"Claim Base\",\n    onChange: e => setPolicyPremium(e.target.value),\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    justify: \"flex-end\",\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    component: \"span\",\n    onClick: createPolicy,\n    className: classes.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 11\n    }\n  }, \"Create\")))))))));\n}","map":{"version":3,"sources":["/Users/sychen/thesis-app/packages/react-app/src/components/PolicyInputPanel/index.js"],"names":["React","useState","useEffect","ethers","Contract","styled","RINKEBY_ID","addresses","abis","Container","Typography","Grid","TextField","MenuItem","Select","makeStyles","InputLabel","Button","Avatar","ipfs","CloudUploadIcon","FacebookLogin","PolicyIcon","CssBaseline","AccountCircle","FacebookIcon","InputAdornment","DateTimePicker","MuiPickersUtilsProvider","DateFnsUtils","Backdrop","useStyles","theme","container","marginTop","width","marginLeft","marginRight","backgroundColor","padding","borderRadius","avatar","margin","spacing","palette","secondary","main","paper","display","flexDirection","alignItems","textField","form","PolicyInputPanel","classes","loading","setLoading","policyName","setPolicyName","policyType","setPolicyType","policyContent","setPolicyContent","policyPremium","setPolicyPremium","policyStart","setPolicyStart","Date","policyEnd","setPolicyEnd","policyDeadline","setPolicyDeadline","buffer","setBuffer","contentHash","setContentHash","login","setLogin","data","setData","responseFacebook","response","console","log","accessToken","dateToUnix","value","date","getTime","captureFile","event","preventDefault","file","target","files","reader","window","FileReader","readAsArrayBuffer","onloadend","Buffer","from","result","postResponse","add","createPolicy","utils","parseEther","tx","provider","providers","Web3Provider","ethereum","signer","getSigner","policyFactoryContract","policyFactory","waitForTransaction","hash","err","backdrop","name","startAdornment","id","e","input","button"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ethers } from \"ethers\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport styled from 'styled-components';\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\nimport ipfs from '../../ipfs';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport FacebookLogin from 'react-facebook-login';\nimport PolicyIcon from '@material-ui/icons/Policy';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport FacebookIcon from '@material-ui/icons/Facebook';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport { DateTimePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport DateFnsUtils from '@date-io/date-fns'; // choose your lib\nimport Backdrop from '@material-ui/core/Backdrop';\n\n\nconst useStyles = makeStyles((theme) => ({\n    container: {\n      marginTop: \"20px\",\n      width: '800px',\n      marginLeft: 'auto',\n      marginRight: 'auto',\n      backgroundColor: 'white',\n      padding: '30px 30px 30px 30px',\n      borderRadius: '10px'\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.secondary.main,\n    },\n    paper: {\n      marginTop: theme.spacing(8),\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: 200,\n    },\n    form: {\n      width: '100%', // Fix IE 11 issue.\n      marginTop: theme.spacing(3),\n    },\n}));\n\n\nexport default function PolicyInputPanel() {\n    const classes = useStyles()\n\n    const [loading, setLoading] = useState(false);\n    const [policyName, setPolicyName] = useState(0);\n    const [policyType, setPolicyType] = useState(0);\n    const [policyContent, setPolicyContent] = useState('');\n    const [policyPremium, setPolicyPremium] = useState(0);\n    const [policyStart, setPolicyStart] = useState(new Date());\n    const [policyEnd, setPolicyEnd] = useState(new Date());\n    const [policyDeadline, setPolicyDeadline] = useState(new Date());\n\n    const [buffer, setBuffer] = useState('');\n    const [contentHash, setContentHash] = useState('');\n    const [login, setLogin] = useState(false);\n    const [data, setData] = useState({});\n  \n    const responseFacebook = (response) => {\n      console.log(response);\n      setData(response);\n      if (response.accessToken) {\n        setLogin(true);\n      } else {\n        setLogin(false);\n      }\n    }\n\n\n    function dateToUnix(value) {\n        const date = new Date(value);\n        return date.getTime();\n    }\n\n    const captureFile = async event => {\n      console.log('capture file...');\n      event.preventDefault();\n      const file = event.target.files[0];\n      const reader = new window.FileReader();\n      reader.readAsArrayBuffer(file);\n      reader.onloadend = () => {\n        setBuffer(Buffer.from(reader.result));\n      }\n      // upload\n      let data = buffer;\n      console.log('Submit this: ', data);\n      const postResponse = await ipfs.add(data);\n      console.log(\"hash: \", postResponse['path']);\n      setPolicyContent(postResponse['path']);\n    }\n\n\n    async function createPolicy() {\n        try {\n          console.log(ethers.utils.parseEther(policyPremium))\n          console.log(dateToUnix(policyStart), dateToUnix(policyEnd))\n          console.log(dateToUnix(policyDeadline))\n            let tx;\n            setLoading(true);\n            const provider = new ethers.providers.Web3Provider(window.ethereum);\n            const signer = provider.getSigner()\n            const policyFactoryContract = new Contract(addresses[RINKEBY_ID].policyFactory, abis.policyFactory, signer);\n            console.log(policyFactoryContract)\n            tx = await policyFactoryContract.createPolicy(\n                policyName,\n                policyType,\n                ethers.utils.parseEther(policyPremium),\n                dateToUnix(policyStart),\n                dateToUnix(policyEnd),\n                policyContent,\n                dateToUnix(policyDeadline),\n            );\n          // until transactionHash is mined.\n            await provider.waitForTransaction(tx.hash);\n            setLoading(false);\n            console.log(tx);\n            } catch (err) {\n            console.log(err)\n            }\n            setLoading(false);\n        }\n    return (\n      <div>\n      <Backdrop className={classes.backdrop} open={loading} >\n                <CircularProgress color=\"inherit\" />\n      </Backdrop>\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <Container component=\"main\" maxWidth=\"md\">\n        <CssBaseline />\n        <div className={classes.paper}>\n        <Grid container justify = \"center\">\n      </Grid>\n        <Grid container>\n          <FacebookLogin\n          appId=\"360104115420180\"\n          autoLoad={false}\n          fields=\"name,email\"\n          scope=\"public_profile\"\n          size=\"small\"\n          callback={responseFacebook}\n          icon=\"fa-facebook\" />\n        </Grid>\n      <form className={classes.form} noValidate>\n      <Grid container spacing={4}>\n      <Grid item xs={12} sm={6}>\n          <TextField\n            required\n            id=\"Proposer\"\n            label=\"Proposer\"\n            value={data.name}\n            disabled\n            fullWidth\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <AccountCircle />\n                </InputAdornment>\n              ),\n            }}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            required\n            id=\"UserId\"\n            label=\"UserId\"\n            value={data.id}\n            disabled\n            fullWidth\n            InputProps={{\n              startAdornment: (\n              <InputAdornment position=\"start\">\n                <FacebookIcon />\n              </InputAdornment>\n              ),\n            }}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            required\n            id=\"policyName\"\n            label=\"Title\"\n            onChange={e => setPolicyName(e.target.value)}\n            fullWidth\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n        <TextField\n          id=\"standard-select-type\"\n          required\n          select\n          label=\"Type\"\n          value={policyType}\n          onChange={e => setPolicyType(e.target.value)}\n          helperText=\"Please select your insurance type\"\n          fullWidth\n        >\n            <MenuItem value=\"Cyper Insurance\">Cyper Insurance</MenuItem>\n            <MenuItem value=\"Health Insurance\">Health Insurance</MenuItem>\n            <MenuItem value=\"Investment Insurance\">Investment Insurance</MenuItem>\n            <MenuItem value=\"Auto Insurance\">Auto Insurance</MenuItem>\n            </TextField>\n        </Grid>\n        \n        <Grid item xs={12} sm={6}>\n        <DateTimePicker\n            value={policyStart}\n            disablePast\n            onChange={e => setPolicyStart(e)}\n            label=\"Start time\"\n            showTodayButton\n            fullWidth\n          />\n        </Grid>\n\n        <Grid item xs={12} sm={6}>\n        <DateTimePicker\n            value={policyEnd}\n            disablePast\n            onChange={e => setPolicyEnd(e)}\n            label=\"End time\"\n            showTodayButton\n            fullWidth\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n        <DateTimePicker\n            value={policyDeadline}\n            disablePast\n            onChange={e => setPolicyDeadline(e)}\n            label=\"Deadline\"\n            showTodayButton\n            fullWidth\n          />\n        </Grid>\n        \n        <Grid item xs={12} sm={9}>\n          <TextField\n            required\n            id=\"policyContent\"\n            name=\"policyContent\"\n            label=\"Content Hash\"\n            value={policyContent}\n            disabled\n            fullWidth\n          />\n        </Grid>\n        <Grid item xs={12} sm={3}>\n        <input\n                type=\"file\"\n                accept=\".pdf,.word,.jpg\"\n                className={classes.input}\n                style={{ display: 'none', }}\n                id=\"contained-button-file\"\n                multiple\n                onChange={e => captureFile(e)}\n              />\n            <label htmlFor=\"contained-button-file\">\n            <Button variant=\"contained\" component=\"span\" className={classes.button} startIcon={<CloudUploadIcon />}>\n              Upload Policy\n            </Button>\n            </label> \n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            required\n            id=\"Policypremium\"\n            name=\"Policypremium\"\n            label=\"Claim Base\"\n            onChange={e => setPolicyPremium(e.target.value)}\n            fullWidth\n          />\n        </Grid>\n        \n        <Grid justify=\"flex-end\" container>\n          <Grid>\n          <Button variant=\"contained\" component=\"span\" onClick={createPolicy} className={classes.button}>\n              Create\n          </Button>\n          </Grid>\n        </Grid>\n      </Grid>\n      </form>\n    </div>\n    \n  </Container>\n  </MuiPickersUtilsProvider>\n\n  </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}