{"ast":null,"code":"var _jsxFileName = \"/Users/sychen/thesis-app/packages/react-app/src/components/PolicyInputPanel/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { ethers } from \"ethers\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport styled from 'styled-components';\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nexport default function PolicyInputPanel() {\n  const [loading, setLoading] = useState(false);\n  const [policyName, setPolicyName] = useState(0);\n  const [policyType, setpolicyType] = useState(0);\n  const [policyContent, setPolicyContent] = useState(0);\n  const [policyPremium, setPolicyPremium] = useState(0);\n  const [policyDuration, setPolicyDuration] = useState(0); // after today\n\n  const today = new Date().toISOString().split(\"T\")[0];\n\n  function dateToUnix(value) {\n    const date = new Date(value);\n    return date.getTime();\n  }\n\n  async function createPolicy() {\n    try {\n      let tx;\n      setLoading(true);\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const policyFactoryContract = new Contract(addresses[RINKEBY_ID].policyFactory, abis.policyFactory, signer);\n      console.log(policyFactoryContract);\n      tx = await policyFactoryContract.createPolicy(policyName, policyType, policyContent, policyPremium, policyDuration); // until transactionHash is mined.\n\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      console.log(tx);\n    } catch (err) {\n      console.log(err);\n    }\n\n    setLoading(false);\n  }\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    style: {\n      marginTop: \"20px\"\n    },\n    maxWidth: \"lg\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, \"Shipping address\")));\n}","map":{"version":3,"sources":["/Users/sychen/thesis-app/packages/react-app/src/components/PolicyInputPanel/index.js"],"names":["React","useState","useEffect","ethers","Contract","styled","RINKEBY_ID","addresses","abis","Container","Typography","Grid","PolicyInputPanel","loading","setLoading","policyName","setPolicyName","policyType","setpolicyType","policyContent","setPolicyContent","policyPremium","setPolicyPremium","policyDuration","setPolicyDuration","today","Date","toISOString","split","dateToUnix","value","date","getTime","createPolicy","tx","provider","providers","Web3Provider","window","ethereum","signer","getSigner","policyFactoryContract","policyFactory","console","log","waitForTransaction","hash","err","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ethers } from \"ethers\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport styled from 'styled-components';\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\n\n\n\nexport default function PolicyInputPanel() {\n    const [loading, setLoading] = useState(false);\n    const [policyName, setPolicyName] = useState(0);\n    const [policyType, setpolicyType] = useState(0);\n    const [policyContent, setPolicyContent] = useState(0);\n    const [policyPremium, setPolicyPremium] = useState(0);\n    const [policyDuration, setPolicyDuration] = useState(0);\n\n    // after today\n    const today = new Date().toISOString().split(\"T\")[0];\n\n    function dateToUnix(value) {\n        const date = new Date(value);\n        return date.getTime();\n    }\n\n    async function createPolicy() {\n        try {\n            let tx;\n            setLoading(true);\n            const provider = new ethers.providers.Web3Provider(window.ethereum);\n            const signer = provider.getSigner()\n            const policyFactoryContract = new Contract(addresses[RINKEBY_ID].policyFactory, abis.policyFactory, signer);\n            console.log(policyFactoryContract)\n            tx = await policyFactoryContract.createPolicy(\n                policyName,\n                policyType,\n                policyContent,\n                policyPremium,\n                policyDuration\n            );\n          // until transactionHash is mined.\n            await provider.waitForTransaction(tx.hash);\n            setLoading(false);\n            console.log(tx);\n            } catch (err) {\n            console.log(err)\n            }\n            setLoading(false);\n        }\n\n    return (\n        <Grid container style={{ marginTop: \"20px\" }} maxWidth='lg' justify=\"center\">\n            <React.Fragment>\n                <Typography variant=\"h6\" gutterBottom>\n                    Shipping address\n                </Typography>\n               \n            </React.Fragment>\n        </Grid>\n    )\n}"]},"metadata":{},"sourceType":"module"}