{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sychen/thesis-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sychen/thesis-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/sychen/thesis-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Jumbotron from'../Jumbotron';import styled from'styled-components';import{ethers}from\"ethers\";import{Contract}from\"@ethersproject/contracts\";import{RINKEBY_ID,addresses,abis}from\"@uniswap-v2-app/contracts\";import Link from'@material-ui/core/Link';import{makeStyles}from'@material-ui/core/styles';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableContainer from'@material-ui/core/TableContainer';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import Paper from'@material-ui/core/Paper';import Container from'@material-ui/core/Container';import Button from'@material-ui/core/Button';import CircularProgressWithLabel from'@material-ui/core/CircularProgress';import Box from'@material-ui/core/Box';import Typography from'@material-ui/core/Typography';import CircularProgress from'@material-ui/core/CircularProgress';import{green}from'@material-ui/core/colors';import Avatar from'@material-ui/core/Avatar';import CssBaseline from'@material-ui/core/CssBaseline';import TextField from'@material-ui/core/TextField';import FormControlLabel from'@material-ui/core/FormControlLabel';import Checkbox from'@material-ui/core/Checkbox';import Grid from'@material-ui/core/Grid';import LockOutlinedIcon from'@material-ui/icons/LockOutlined';import{StepContent}from\"@material-ui/core\";import ButtonGroup from'@material-ui/core/ButtonGroup';import Backdrop from'@material-ui/core/Backdrop';var useStyles=makeStyles(function(theme){return{table:{minWidth:650},approve:{margin:theme.spacing(3,0,2)},wrapper:{margin:theme.spacing(1),position:'relative'},buttonProgress:{position:'absolute',top:'50%',left:'50%',marginTop:-12},backdrop:{zIndex:theme.zIndex.drawer+1,color:'#fff'}};});export default function ClaimsPage(props){var classes=useStyles();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),policyAddress=_useState2[0],setPolicyAddress=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),requests=_useState4[0],setRequests=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),stakeHoldersCount=_useState6[0],setStakeHoldersCount=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),delegatorCount=_useState8[0],setDelegatorCount=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),requestCount=_useState12[0],setRequestCount=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isDelegator=_useState14[0],setIsDelegator=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),content=_useState16[0],setContent=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),multiple=_useState18[0],setMultiple=_useState18[1];useEffect(function(){var getPolicies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var provider,signer,account,policyFactoryContract,policiesAddress,policy,policyStakeHolders,requestCount,registryContract,delegatorCount,isDelegator,requests;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:provider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();_context.next=4;return signer.getAddress();case 4:account=_context.sent;policyFactoryContract=new Contract(addresses[RINKEBY_ID].policyFactory,abis.policyFactory,provider);_context.next=8;return policyFactoryContract.deployedPolicies(props.match.params.id);case 8:policiesAddress=_context.sent;policy=new Contract(policiesAddress,abis.policy,provider);_context.next=12;return policy.getPolicyStakeholders();case 12:policyStakeHolders=_context.sent;_context.next=15;return policy.getRequestsCount();case 15:requestCount=_context.sent;registryContract=new Contract(addresses[RINKEBY_ID].registry,abis.registry,provider);_context.next=19;return registryContract.getDelegatorCount();case 19:delegatorCount=_context.sent;_context.next=22;return registryContract.validDelegators(account);case 22:isDelegator=_context.sent;setIsDelegator(isDelegator);setRequestCount(requestCount);setStakeHoldersCount(policyStakeHolders.length);setDelegatorCount(parseInt(delegatorCount.toString()));setPolicyAddress(policiesAddress);_context.next=30;return Promise.all(Array(parseInt(requestCount)).fill().map(function(element,index){return policy.requests(index);}).reverse());case 30:requests=_context.sent;setRequests(requests);case 32:case\"end\":return _context.stop();}}},_callee);}));return function getPolicies(){return _ref.apply(this,arguments);};}();getPolicies();},[]);function refreshPage(){window.location.reload(false);}function delApprove(_x){return _delApprove.apply(this,arguments);}function _delApprove(){_delApprove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(idx){var tx,provider,signer,policyContract;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;setLoading(true);provider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();policyContract=new Contract(policyAddress,abis.policy,signer);_context2.next=7;return policyContract.delApproveRequest(idx);case 7:tx=_context2.sent;_context2.next=10;return provider.waitForTransaction(tx.hash);case 10:setLoading(false);console.log(tx);refreshPage();_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 18:setLoading(false);case 19:case\"end\":return _context2.stop();}}},_callee2,null,[[0,15]]);}));return _delApprove.apply(this,arguments);}function Approve(_x2){return _Approve.apply(this,arguments);}function _Approve(){_Approve=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(idx){var tx,provider,signer,policyContract;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;setLoading(true);provider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();policyContract=new Contract(policyAddress,abis.policy,signer);_context3.next=7;return policyContract.approveRequest(idx);case 7:tx=_context3.sent;_context3.next=10;return provider.waitForTransaction(tx.hash);case 10:setLoading(false);console.log(tx);refreshPage();_context3.next=18;break;case 15:_context3.prev=15;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 18:setLoading(false);case 19:case\"end\":return _context3.stop();}}},_callee3,null,[[0,15]]);}));return _Approve.apply(this,arguments);}function Request(){return _Request.apply(this,arguments);}function _Request(){_Request=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var tx,provider,signer,policyContract;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;setLoading(true);provider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();policyContract=new Contract(policyAddress,abis.policy,signer);_context4.next=7;return policyContract.createRequest(content,multiple);case 7:tx=_context4.sent;_context4.next=10;return provider.waitForTransaction(tx.hash);case 10:setLoading(false);console.log(tx);refreshPage();_context4.next=18;break;case 15:_context4.prev=15;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 18:setLoading(false);case 19:case\"end\":return _context4.stop();}}},_callee4,null,[[0,15]]);}));return _Request.apply(this,arguments);}function approveToken(){return _approveToken.apply(this,arguments);}function _approveToken(){_approveToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var tx,provider,signer,erc721Contract;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;setLoading(true);provider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();erc721Contract=new Contract(addresses[RINKEBY_ID].tokens.ATP,abis.erc721,signer);_context5.next=7;return erc721Contract.setApprovalForAll(policyAddress,true);case 7:tx=_context5.sent;_context5.next=10;return provider.waitForTransaction(tx.hash);case 10:setLoading(false);console.log(tx);refreshPage();_context5.next=18;break;case 15:_context5.prev=15;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);case 18:setLoading(false);case 19:case\"end\":return _context5.stop();}}},_callee5,null,[[0,15]]);}));return _approveToken.apply(this,arguments);}function Claim(_x3){return _Claim.apply(this,arguments);}function _Claim(){_Claim=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(idx){var tx,provider,signer,policyContract;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;setLoading(true);provider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();policyContract=new Contract(policyAddress,abis.policy,signer);_context6.next=7;return policyContract.claimRequest(idx);case 7:tx=_context6.sent;_context6.next=10;return provider.waitForTransaction(tx.hash);case 10:setLoading(false);console.log(tx);refreshPage();_context6.next=18;break;case 15:_context6.prev=15;_context6.t0=_context6[\"catch\"](0);console.log(_context6.t0);case 18:setLoading(false);case 19:case\"end\":return _context6.stop();}}},_callee6,null,[[0,15]]);}));return _Claim.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Backdrop,{className:classes.backdrop,open:loading},/*#__PURE__*/React.createElement(CircularProgress,{color:\"inherit\"})),/*#__PURE__*/React.createElement(Jumbotron,{title:\"Claims\",description:\"Earn rewards by approving claims.\"}),/*#__PURE__*/React.createElement(Container,{className:classes.container,maxWidth:\"xs\",component:Paper,style:{padding:'0px 30px 30px 30px'}},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(\"form\",{className:classes.form,noValidate:true},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"content\",label:\"IPFS Content\",name:\"content\",onChange:function onChange(e){return setContent(e.target.value);}}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"multiple\",label:\"Multiple\",id:\"multiple\",onChange:function onChange(e){return setMultiple(e.target.value);}}),/*#__PURE__*/React.createElement(ButtonGroup,{variant:\"contained\",color:\"primary\",\"aria-label\":\"contained primary button group\"},/*#__PURE__*/React.createElement(Button,{fullWidth:true,variant:\"contained\",color:\"primary\",disabled:loading,onClick:function onClick(e){return approveToken();}},\"Approve tokens\"),/*#__PURE__*/React.createElement(Button,{fullWidth:true,variant:\"contained\",color:\"primary\",disabled:loading,onClick:function onClick(e){return Request();}},\"Request\"))))),/*#__PURE__*/React.createElement(Container,{className:classes.container,maxWidth:\"lg\",style:{marginTop:'30px'}},/*#__PURE__*/React.createElement(TableContainer,{component:Paper},/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-label\":\"simple table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,null,\"ID\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"IPFS Content\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Multiple\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Requester\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Approve Rate\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Dele. Approve Rate\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Action\"),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},\"Delegator\"))),/*#__PURE__*/React.createElement(TableBody,null,requests.map(function(request,idx){return/*#__PURE__*/React.createElement(TableRow,{key:idx,style:request.complete?{backgroundColor:'#E0E0E0'}:{}},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},requestCount-idx),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\"},/*#__PURE__*/React.createElement(Link,{href:\"https://ipfs.io/ipfs/\".concat(request.description_URI,\"/\"),rel:\"noopener\",target:\"_blank\",style:{textDecoration:'none'}},request.description_URI))),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},request.multiple.toString()),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},request.requester.slice(0,6),\"...\",request.requester.slice(-4)),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(Box,{position:\"relative\",display:\"inline-flex\"},/*#__PURE__*/React.createElement(CircularProgressWithLabel,{variant:\"determinate\",value:parseInt(request.approvalCount.toString())/stakeHoldersCount*100}),/*#__PURE__*/React.createElement(Box,{top:0,left:0,bottom:0,right:0,position:\"absolute\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},/*#__PURE__*/React.createElement(Typography,{variant:\"caption\",component:\"div\",color:\"textSecondary\"},\"\".concat(Math.round(parseInt(request.approvalCount.toString())/stakeHoldersCount*100),\"%\"))))),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(Box,{position:\"relative\",display:\"inline-flex\"},/*#__PURE__*/React.createElement(CircularProgressWithLabel,{variant:\"determinate\",value:parseInt(request.delApprovalCount.toString())/delegatorCount*100}),/*#__PURE__*/React.createElement(Box,{top:0,left:0,bottom:0,right:0,position:\"absolute\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},/*#__PURE__*/React.createElement(Typography,{variant:\"caption\",component:\"div\",color:\"textSecondary\"},\"\".concat(Math.round(parseInt(request.delApprovalCount.toString())/delegatorCount*100),\"%\"))))),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(\"div\",{className:classes.wrapper},parseInt(request.approvalCount.toString())/stakeHoldersCount*100>66&&parseInt(request.delApprovalCount.toString()/delegatorCount)*100>66?/*#__PURE__*/React.createElement(Button,{size:\"small\",color:\"secondary\",disabled:loading,className:classes.approve,onClick:function onClick(e){return Claim(requestCount-idx-1);}},\"Claim\"):/*#__PURE__*/React.createElement(Button,{size:\"small\",color:\"primary\",disabled:loading,className:classes.approve,onClick:function onClick(e){return Approve(requestCount-idx-1);}},\"Approve\"))),/*#__PURE__*/React.createElement(TableCell,{align:\"right\"},/*#__PURE__*/React.createElement(\"div\",{className:classes.wrapper},/*#__PURE__*/React.createElement(Button,{size:\"small\",color:\"primary\",disabled:loading||!isDelegator,className:classes.approve,onClick:function onClick(e){return delApprove(requestCount-idx-1);}},\"Approve\"))));}))))));}","map":{"version":3,"sources":["/Users/sychen/thesis-app/packages/react-app/src/components/Pages/ClaimsPage.js"],"names":["React","useState","useEffect","Jumbotron","styled","ethers","Contract","RINKEBY_ID","addresses","abis","Link","makeStyles","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Container","Button","CircularProgressWithLabel","Box","Typography","CircularProgress","green","Avatar","CssBaseline","TextField","FormControlLabel","Checkbox","Grid","LockOutlinedIcon","StepContent","ButtonGroup","Backdrop","useStyles","theme","table","minWidth","approve","margin","spacing","wrapper","position","buttonProgress","top","left","marginTop","backdrop","zIndex","drawer","color","ClaimsPage","props","classes","policyAddress","setPolicyAddress","requests","setRequests","stakeHoldersCount","setStakeHoldersCount","delegatorCount","setDelegatorCount","loading","setLoading","requestCount","setRequestCount","isDelegator","setIsDelegator","content","setContent","multiple","setMultiple","getPolicies","provider","providers","Web3Provider","window","ethereum","signer","getSigner","getAddress","account","policyFactoryContract","policyFactory","deployedPolicies","match","params","id","policiesAddress","policy","getPolicyStakeholders","policyStakeHolders","getRequestsCount","registryContract","registry","getDelegatorCount","validDelegators","length","parseInt","toString","Promise","all","Array","fill","map","element","index","reverse","refreshPage","location","reload","delApprove","idx","policyContract","delApproveRequest","tx","waitForTransaction","hash","console","log","Approve","approveRequest","Request","createRequest","approveToken","erc721Contract","tokens","ATP","erc721","setApprovalForAll","Claim","claimRequest","container","padding","paper","form","e","target","value","request","complete","backgroundColor","description_URI","textDecoration","requester","slice","approvalCount","Math","round","delApprovalCount"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Jumbotron from '../Jumbotron';\nimport styled from 'styled-components';\nimport { ethers } from \"ethers\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport Link from '@material-ui/core/Link';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Container from '@material-ui/core/Container';\nimport Button from '@material-ui/core/Button';\nimport CircularProgressWithLabel from '@material-ui/core/CircularProgress';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { green } from '@material-ui/core/colors';\nimport Avatar from '@material-ui/core/Avatar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport { StepContent } from \"@material-ui/core\";\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport Backdrop from '@material-ui/core/Backdrop';\n\n\nconst useStyles = makeStyles((theme) => ({\n    table: {\n        minWidth: 650,\n    },\n    approve: {\n        margin: theme.spacing(3, 0, 2),\n    },\n    wrapper: {\n        margin: theme.spacing(1),\n        position: 'relative',\n    },\n    buttonProgress: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        marginTop: -12,\n    },\n    backdrop: {\n        zIndex: theme.zIndex.drawer + 1,\n        color: '#fff',\n      },\n}));\n\nexport default function ClaimsPage(props) {\n    const classes = useStyles();\n    const [policyAddress, setPolicyAddress] = useState(0);\n    const [requests, setRequests] = useState([]);\n    const [stakeHoldersCount, setStakeHoldersCount] = useState(0);\n    const [delegatorCount, setDelegatorCount] = useState(0);\n    const [loading, setLoading] = useState(false);\n    const [requestCount, setRequestCount] = useState(0);\n    const [isDelegator, setIsDelegator] = useState(false);\n    const [content, setContent] = useState('');\n    const [multiple, setMultiple] = useState('');\n\n    useEffect(() => {\n        const getPolicies = async () => {\n            const provider = new ethers.providers.Web3Provider(window.ethereum)\n            const signer = provider.getSigner()\n            const account = await signer.getAddress()\n\n            const policyFactoryContract = new Contract(addresses[RINKEBY_ID].policyFactory, abis.policyFactory, provider)\n            const policiesAddress = await policyFactoryContract.deployedPolicies(props.match.params.id)\n            const policy = new Contract(policiesAddress, abis.policy, provider)\n            const policyStakeHolders = await policy.getPolicyStakeholders();\n            const requestCount = await policy.getRequestsCount();\n            const registryContract = new Contract(addresses[RINKEBY_ID].registry, abis.registry, provider)\n            const delegatorCount = await registryContract.getDelegatorCount()\n            const isDelegator = await registryContract.validDelegators(account)\n\n            setIsDelegator(isDelegator)\n            setRequestCount(requestCount);\n            setStakeHoldersCount(policyStakeHolders.length)\n            setDelegatorCount(parseInt(delegatorCount.toString()));\n            setPolicyAddress(policiesAddress)\n\n            const requests = await Promise.all(\n                Array(parseInt(requestCount))\n                    .fill()\n                    .map((element, index) => {\n                        return policy.requests(index);\n                    }).reverse()\n            );\n            setRequests(requests)\n        }\n\n\n        getPolicies();\n    }, []);\n\n\n    function refreshPage() {\n        window.location.reload(false);\n      }\n\n    async function delApprove(idx) {\n        try {\n            let tx;\n            setLoading(true);\n            const provider = new ethers.providers.Web3Provider(window.ethereum);\n            const signer = provider.getSigner()\n            const policyContract = new Contract(policyAddress, abis.policy, signer);\n            tx = await policyContract.delApproveRequest(\n                idx\n            );\n            // until transactionHash is mined.\n            await provider.waitForTransaction(tx.hash);\n            setLoading(false);\n            console.log(tx);\n            refreshPage();\n        } catch (err) {\n            console.log(err)\n        }\n        setLoading(false);\n    }\n\n    async function Approve(idx) {\n        try {\n            let tx;\n            setLoading(true);\n            const provider = new ethers.providers.Web3Provider(window.ethereum);\n            const signer = provider.getSigner()\n            const policyContract = new Contract(policyAddress, abis.policy, signer);\n            tx = await policyContract.approveRequest(\n                idx\n            );\n            // until transactionHash is mined.\n            await provider.waitForTransaction(tx.hash);\n            setLoading(false);\n            console.log(tx);\n            refreshPage();\n        } catch (err) {\n            console.log(err)\n        }\n        setLoading(false);\n    }\n\n    async function Request() {\n        try {\n            let tx;\n            setLoading(true);\n            const provider = new ethers.providers.Web3Provider(window.ethereum);\n            const signer = provider.getSigner()\n            const policyContract = new Contract(policyAddress, abis.policy, signer);\n            tx = await policyContract.createRequest(\n                content, multiple\n            );\n            // until transactionHash is mined.\n            await provider.waitForTransaction(tx.hash);\n            setLoading(false);\n            console.log(tx);\n            refreshPage();\n        } catch (err) {\n            console.log(err)\n        }\n        setLoading(false);\n    }\n\n    async function approveToken() {\n        try {\n            let tx;\n            setLoading(true);\n            const provider = new ethers.providers.Web3Provider(window.ethereum);\n            const signer = provider.getSigner()\n            const erc721Contract = new Contract(addresses[RINKEBY_ID].tokens.ATP, abis.erc721, signer);\n            tx = await erc721Contract.setApprovalForAll(\n                policyAddress,\n                true\n            );\n            // until transactionHash is mined.\n            await provider.waitForTransaction(tx.hash);\n            setLoading(false);\n            console.log(tx);\n            refreshPage();\n        } catch (err) {\n            console.log(err)\n        }\n        setLoading(false);\n    }\n\n\n    async function Claim(idx) {\n        try {\n            let tx;\n            setLoading(true);\n            const provider = new ethers.providers.Web3Provider(window.ethereum);\n            const signer = provider.getSigner()\n            const policyContract = new Contract(policyAddress, abis.policy, signer);\n            tx = await policyContract.claimRequest(\n                idx\n            );\n            // until transactionHash is mined.\n            await provider.waitForTransaction(tx.hash);\n            setLoading(false);\n            console.log(tx);\n            refreshPage();\n        } catch (err) {\n            console.log(err)\n        }\n        setLoading(false);\n    }\n\n\n    return (\n        <div>\n            <Backdrop className={classes.backdrop} open={loading} >\n                <CircularProgress color=\"inherit\" />\n            </Backdrop>\n            <Jumbotron\n                title=\"Claims\"\n                description=\"Earn rewards by approving claims.\" />\n            <Container className={classes.container} maxWidth='xs' component={Paper} style={{ padding: '0px 30px 30px 30px' }}>\n                <CssBaseline />\n                <div className={classes.paper}>\n                    <form className={classes.form} noValidate>\n                        <TextField\n                            variant=\"outlined\"\n                            margin=\"normal\"\n                            required\n                            fullWidth\n                            id=\"content\"\n                            label=\"IPFS Content\"\n                            name=\"content\"\n                            onChange={e => setContent(e.target.value)}\n                        />\n                        <TextField\n                            variant=\"outlined\"\n                            margin=\"normal\"\n                            required\n                            fullWidth\n                            name=\"multiple\"\n                            label=\"Multiple\"\n                            id=\"multiple\"\n                            onChange={e => setMultiple(e.target.value)}\n                        />\n                        <ButtonGroup variant=\"contained\" color=\"primary\" aria-label=\"contained primary button group\">\n\n                            <Button\n                                fullWidth\n                                variant=\"contained\"\n                                color=\"primary\"\n                                disabled={loading}\n                                onClick={e => approveToken()}\n                            >\n                                Approve tokens\n                            </Button>\n\n                            <Button\n                                fullWidth\n                                variant=\"contained\"\n                                color=\"primary\"\n                                disabled={loading}\n                                onClick={e => Request()}\n                            >\n                                Request\n                            </Button>\n                        </ButtonGroup>\n                    </form>\n                </div>\n\n            </Container>\n\n            <Container className={classes.container} maxWidth='lg' style={{ marginTop: '30px' }}>\n\n                <TableContainer component={Paper}>\n                    <Table className={classes.table} aria-label=\"simple table\">\n                        <TableHead>\n                            <TableRow>\n                                <TableCell>ID</TableCell>\n                                <TableCell align=\"right\">IPFS Content</TableCell>\n                                <TableCell align=\"right\">Multiple</TableCell>\n                                <TableCell align=\"right\">Requester</TableCell>\n                                <TableCell align=\"right\">Approve Rate</TableCell>\n                                <TableCell align=\"right\">Dele. Approve Rate</TableCell>\n                                <TableCell align=\"right\">Action</TableCell>\n                                <TableCell align=\"right\">Delegator</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {requests.map((request, idx) => (\n                                <TableRow key={idx} style={ request.complete ? {backgroundColor: '#E0E0E0'} : {}} >\n                                    <TableCell component=\"th\" scope=\"row\">\n                                        {requestCount - idx}\n                                    </TableCell>\n                                    <TableCell align=\"right\">\n                                        <Typography color=\"textSecondary\">\n                                            <Link href={`https://ipfs.io/ipfs/${request.description_URI}/`} rel=\"noopener\" target=\"_blank\" style={{ textDecoration: 'none' }}>\n                                                {request.description_URI}\n                                            </Link>\n                                        </Typography>\n                                    </TableCell>\n                                    <TableCell align=\"right\">{request.multiple.toString()}</TableCell>\n                                    <TableCell align=\"right\">{request.requester.slice(0, 6)}...{request.requester.slice(-4)}</TableCell>\n                                    <TableCell align=\"right\">\n                                        <Box position=\"relative\" display=\"inline-flex\">\n                                            <CircularProgressWithLabel\n                                                variant=\"determinate\"\n                                                value={parseInt(request.approvalCount.toString()) / (stakeHoldersCount) * 100} />\n                                            <Box\n                                                top={0}\n                                                left={0}\n                                                bottom={0}\n                                                right={0}\n                                                position=\"absolute\"\n                                                display=\"flex\"\n                                                alignItems=\"center\"\n                                                justifyContent=\"center\"\n                                            >\n                                                <Typography variant=\"caption\" component=\"div\" color=\"textSecondary\">{`${Math.round(\n                                                    parseInt(request.approvalCount.toString()) / (stakeHoldersCount) * 100\n                                                )}%`}</Typography>\n                                            </Box>\n                                        </Box>\n                                    </TableCell>\n                                    <TableCell align=\"right\">\n                                        <Box position=\"relative\" display=\"inline-flex\">\n                                            <CircularProgressWithLabel\n                                                variant=\"determinate\"\n                                                value={parseInt(request.delApprovalCount.toString()) / (delegatorCount) * 100} />\n                                            <Box\n                                                top={0}\n                                                left={0}\n                                                bottom={0}\n                                                right={0}\n                                                position=\"absolute\"\n                                                display=\"flex\"\n                                                alignItems=\"center\"\n                                                justifyContent=\"center\"\n                                            >\n                                                <Typography variant=\"caption\" component=\"div\" color=\"textSecondary\">{`${Math.round(\n                                                    parseInt(request.delApprovalCount.toString()) / (delegatorCount) * 100\n                                                )}%`}</Typography>\n                                            </Box>\n                                        </Box>\n                                    </TableCell>\n                                    <TableCell align=\"right\">\n                                        <div className={classes.wrapper}>\n                                            {parseInt(request.approvalCount.toString()) / (stakeHoldersCount) * 100 > 66 && parseInt(request.delApprovalCount.toString() / (delegatorCount)) * 100 > 66 ?\n                                                <Button\n                                                    size=\"small\"\n                                                    color=\"secondary\"\n                                                    disabled={loading}\n                                                    className={classes.approve}\n                                                    onClick={e => Claim(requestCount - idx - 1)}\n                                                >\n                                                    Claim\n                                        </Button>\n                                                : <Button\n                                                    size=\"small\"\n                                                    color=\"primary\"\n                                                    disabled={loading}\n                                                    className={classes.approve}\n                                                    onClick={e => Approve(requestCount - idx - 1)}\n                                                >\n                                                    Approve\n                                        </Button>}\n                                        </div>\n                                    </TableCell>\n                                    <TableCell align=\"right\">\n                                        <div className={classes.wrapper}>\n                                            <Button\n                                                size=\"small\"\n                                                color=\"primary\"\n                                                disabled={loading || !isDelegator}\n                                                className={classes.approve}\n                                                onClick={e => delApprove(requestCount - idx - 1)}\n                                            >\n                                                Approve\n                                        </Button>\n                                        </div>\n                                    </TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </Container>\n\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}