{"ast":null,"code":"var _jsxFileName = \"/Users/sychen/thesis-app/packages/react-app/src/components/StakeInputPanel/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { ethers } from \"ethers\";\nimport styled from 'styled-components';\nimport { ChainId, Token, WETH, Fetcher, Route } from '@uniswap/sdk';\nimport Container from '@material-ui/core/Container';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Icon from '@material-ui/core/Icon';\nimport Typography from '@material-ui/core/Typography';\nimport CardActions from '@material-ui/core/CardActions';\nimport { Button, CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport Jumbotron from '../Jumbotron';\nimport Backdrop from '@material-ui/core/Backdrop'; // const projectId = \"66fbccb2856b40b3a622d925568379e9\";\n// const projectSecret = \"275ed56f36e440e0ab7cad94a3310aae\";\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    marginTop: \"20px\"\n  },\n  root: {},\n  CardContent: {\n    backgroundColor: '#FFFFFF',\n    paddingTop: '2rem',\n    padding: '0px 2rem 2rem'\n  },\n  GridContainer: {\n    padding: '0px 30px 30px 0px'\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)'\n  },\n  title: {\n    fontSize: 14,\n    fontWeight: '600'\n  },\n  pos: {\n    marginBottom: 12\n  },\n  FormContent: {\n    padding: '0.5rem 1rem',\n    marginBottom: '1rem',\n    borderRadius: '1rem',\n    width: '100%',\n    border: '1px solid rgb(228, 232, 239)',\n    color: 'rgb(80, 80, 80)',\n    boxShadow: 'rgb(0 0 0 / 4%) 0px 1px 6px inset'\n  },\n  disabledFormContent: {\n    padding: '0.5rem 1rem',\n    marginBottom: '1rem',\n    borderRadius: '1rem',\n    width: '100%',\n    border: '1px solid rgb(228, 232, 239)',\n    color: 'rgb(80, 80, 80)',\n    boxShadow: 'rgb(0 0 0 / 4%) 0px 1px 6px inset',\n    background: 'rgb(228, 232, 239)'\n  },\n  symbol: {\n    fontSize: '1.5rem'\n  },\n  max: {\n    display: 'inline',\n    opacity: '1',\n    lineHeight: '1rem',\n    color: 'rgb(96, 211, 162)',\n    cursor: 'pointer'\n  },\n  currencyInput: {\n    padding: '1rem 1rem 1rem 0px',\n    textAlign: 'right',\n    border: 'none',\n    fontSize: '1.5rem',\n    fontWeight: '400',\n    width: '100%',\n    boxSizing: 'border-box',\n    appearance: 'none',\n    outline: 'none',\n    \"&:focus\": {\n      outline: 'none !important'\n    }\n  },\n  swapButton: {\n    color: '#24947A',\n    borderColor: '#24947A',\n    borderRadius: '50px',\n    float: 'right',\n    width: '100px',\n    loading: ''\n  }\n}));\nexport default function StakeInputPanel(props) {\n  const classes = useStyles();\n  const provider = new ethers.providers.Web3Provider(window.ethereum);\n  const [ETHAmount, setETHAmount] = useState('');\n  const [SYCAmount, setSYCAmount] = useState('');\n  const [ETHPrice, setETHPrice] = useState(0);\n  const [SYCPrice, setSYCPrice] = useState(0);\n  const [ratio, setRatio] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [totoken, setTotoken] = useState(true);\n  const [approveAlready, setApproveAlready] = useState(false);\n  const [networkId, setNetworkId] = useState(0);\n  const [refCode, setRefCode] = useState('');\n  useEffect(() => {\n    async function getNetworkId() {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const networkId = await provider.getNetwork();\n      setNetworkId(networkId.chainId);\n    }\n\n    async function getApproveState() {\n      const SycContract = new Contract(addresses[RINKEBY_ID].tokens.SYC, abis.erc20.abi, provider);\n      const account = await provider.listAccounts();\n\n      if (props.policyAddress) {\n        const approveState = await SycContract.allowance(account[0], props.policyAddress);\n        approveState.gte('5742700000000000000000000') ? setApproveAlready(true) : setApproveAlready(false);\n      }\n    }\n\n    getNetworkId();\n    getApproveState();\n  }, [props]);\n  useEffect(() => {\n    const getETHPrice = async () => {\n      const priceInfo = await axios.get('https://api.binance.com/api/v3/ticker/price?symbol=ETHUSDT');\n      setETHPrice(priceInfo.data.price);\n    };\n\n    const getSYCPrice = async () => {\n      const SycWethExchangeContract = new Contract(addresses[RINKEBY_ID].pairs[\"SYC-WETH\"], abis.pair, provider);\n      const reserves = await SycWethExchangeContract.getReserves(); // reserves[0] is SYC, reserves[1] is ETHER\n\n      const k = reserves[0].mul(reserves[1]);\n      const y = ethers.utils.parseUnits('0.997', \"ether\").add(reserves[0]);\n      const x = ethers.utils.formatEther(reserves[1].sub(k.div(y)));\n      setSYCPrice(x.toString());\n    };\n\n    const getRatio = async () => {\n      const SycWethExchangeContract = new Contract(addresses[RINKEBY_ID].pairs[\"SYC-WETH\"], abis.pair, provider);\n      const reserves = await SycWethExchangeContract.getReserves(); // reserves[0] is SYC, reserves[1] is ETHER\n      // BigNumber supports only interger so we need to multiply 1000\n\n      const ratio = reserves[0].mul(\"10000000\").div(reserves[1]);\n      const ratioFloat = parseFloat(ratio.toString()) / 10000000;\n      setRatio(ratioFloat.toString());\n    }; // ratio firstttt\n\n\n    getRatio();\n    getETHPrice();\n    getSYCPrice();\n  }, [totoken]);\n  useEffect(() => {\n    setETHAmount(props.ether / 10 ** 18);\n\n    if (ratio) {\n      setSYCAmount(props.ether / 10 ** 18 / ratio);\n    }\n  }, [props]);\n\n  async function onProvide() {\n    try {\n      let tx;\n      setLoading(true);\n      console.log(ETHAmount, SYCAmount);\n      console.log(props.policyAddress);\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const account = await signer.getAddress();\n      const policyContract = new Contract(props.policyAddress, abis.policy, signer);\n      const converted = ethers.utils.parseEther(SYCAmount.toString());\n      let params = {\n        value: ethers.utils.parseEther(ETHAmount.toString())\n      };\n      console.log(converted);\n      tx = await policyContract.stakePolicy(converted, refCode, params); // until transactionHash is mined.\n\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      console.log(tx);\n    } catch (err) {\n      console.log(err);\n    }\n\n    setLoading(false);\n  }\n\n  async function onApprove() {\n    try {\n      setLoading(true);\n      const signer = provider.getSigner();\n      const erc20Contract = new Contract(addresses[RINKEBY_ID].tokens.SYC, abis.erc20.abi, signer);\n      let tx = await erc20Contract.approve(props.policyAddress, '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff');\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      setApproveAlready(true);\n    } catch (err) {\n      console.log(err);\n    }\n\n    setLoading(false);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Backdrop, {\n    className: classes.backdrop,\n    open: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Jumbotron, {\n    title: \"Deposit\",\n    description: \"Deposite ETH & SYC on your selected project.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    className: classes.CardContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    id: \"referral\",\n    label: \"Referral Code\",\n    name: \"referral\",\n    value: refCode,\n    onChange: e => setRefCode(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    className: classes.GridContainer,\n    spacing: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: classes.disabledFormContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: 'space-between'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.title,\n    color: \"textPrimary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 23\n    }\n  }, \"Input\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: classes.currencyInput,\n    placeholder: \"0.0\",\n    value: ETHAmount,\n    disabled: true,\n    style: {\n      cursor: 'not-allowed',\n      background: 'rgb(228, 232, 239)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    align: \"right\",\n    className: classes.symbol,\n    display: \"inlign\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 21\n    }\n  }, \"ETH\")), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.pos,\n    color: \"textSecondary\",\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 21\n    }\n  }, (1 / ratio).toFixed(4), \" SYC per ETH\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-plus fa-2x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: classes.disabledFormContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: 'space-between'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.title,\n    color: \"textPrimary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 23\n    }\n  }, \"Input\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: classes.currencyInput,\n    placeholder: \"0.0\",\n    value: SYCAmount,\n    disabled: true,\n    style: {\n      cursor: 'not-allowed',\n      background: 'rgb(228, 232, 239)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    align: \"right\",\n    className: classes.symbol,\n    display: \"inlign\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 21\n    }\n  }, \"SYC\")), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.pos,\n    color: \"textSecondary\",\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 21\n    }\n  }, ratio, \" ETH per SYC\")))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      'marginRight': '0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    className: classes.swapButton,\n    onClick: e => onProvide(),\n    disabled: !approveAlready,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 17\n    }\n  }, !loading && 'Provide'), /*#__PURE__*/React.createElement(Button, {\n    style: {\n      marginRight: '10px'\n    },\n    variant: \"outlined\",\n    className: classes.swapButton,\n    onClick: e => onApprove(),\n    disabled: approveAlready,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 17\n    }\n  }, !loading && 'Approve'))))));\n}","map":{"version":3,"sources":["/Users/sychen/thesis-app/packages/react-app/src/components/StakeInputPanel/index.js"],"names":["React","useState","useEffect","RINKEBY_ID","addresses","abis","Contract","ethers","styled","ChainId","Token","WETH","Fetcher","Route","Container","Card","CardContent","makeStyles","Grid","TextField","Icon","Typography","CardActions","Button","CircularProgress","axios","Jumbotron","Backdrop","useStyles","theme","container","marginTop","root","backgroundColor","paddingTop","padding","GridContainer","bullet","display","margin","transform","title","fontSize","fontWeight","pos","marginBottom","FormContent","borderRadius","width","border","color","boxShadow","disabledFormContent","background","symbol","max","opacity","lineHeight","cursor","currencyInput","textAlign","boxSizing","appearance","outline","swapButton","borderColor","float","loading","StakeInputPanel","props","classes","provider","providers","Web3Provider","window","ethereum","ETHAmount","setETHAmount","SYCAmount","setSYCAmount","ETHPrice","setETHPrice","SYCPrice","setSYCPrice","ratio","setRatio","setLoading","totoken","setTotoken","approveAlready","setApproveAlready","networkId","setNetworkId","refCode","setRefCode","getNetworkId","getNetwork","chainId","getApproveState","SycContract","tokens","SYC","erc20","abi","account","listAccounts","policyAddress","approveState","allowance","gte","getETHPrice","priceInfo","get","data","price","getSYCPrice","SycWethExchangeContract","pairs","pair","reserves","getReserves","k","mul","y","utils","parseUnits","add","x","formatEther","sub","div","toString","getRatio","ratioFloat","parseFloat","ether","onProvide","tx","console","log","signer","getSigner","getAddress","policyContract","policy","converted","parseEther","params","value","stakePolicy","waitForTransaction","hash","err","onApprove","erc20Contract","approve","backdrop","e","target","justifyContent","toFixed","alignItems","height","marginRight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { ethers } from \"ethers\";\nimport styled from 'styled-components';\nimport { ChainId, Token, WETH, Fetcher, Route } from '@uniswap/sdk'\nimport Container from '@material-ui/core/Container';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Icon from '@material-ui/core/Icon';\nimport Typography from '@material-ui/core/Typography';\nimport CardActions from '@material-ui/core/CardActions';\nimport { Button, CircularProgress} from '@material-ui/core';\nimport axios from 'axios';\nimport Jumbotron from '../Jumbotron';\nimport Backdrop from '@material-ui/core/Backdrop';\n\n\n\n// const projectId = \"66fbccb2856b40b3a622d925568379e9\";\n// const projectSecret = \"275ed56f36e440e0ab7cad94a3310aae\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    marginTop: \"20px\",\n  },\n  root: {\n  },\n  CardContent: {\n    backgroundColor: '#FFFFFF',\n    paddingTop: '2rem',\n    padding: '0px 2rem 2rem'\n  },\n  GridContainer: {\n    padding: '0px 30px 30px 0px'\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n    fontWeight: '600'\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  FormContent: {\n    padding: '0.5rem 1rem',\n    marginBottom: '1rem',\n    borderRadius: '1rem',\n    width: '100%',\n    border: '1px solid rgb(228, 232, 239)',\n    color: 'rgb(80, 80, 80)',\n    boxShadow: 'rgb(0 0 0 / 4%) 0px 1px 6px inset',\n  },\n  disabledFormContent: {\n    padding: '0.5rem 1rem',\n    marginBottom: '1rem',\n    borderRadius: '1rem',\n    width: '100%',\n    border: '1px solid rgb(228, 232, 239)',\n    color: 'rgb(80, 80, 80)',\n    boxShadow: 'rgb(0 0 0 / 4%) 0px 1px 6px inset',\n    background: 'rgb(228, 232, 239)'\n  },\n  symbol: {\n    fontSize: '1.5rem'\n  },\n  max: {\n    display: 'inline',\n    opacity: '1',\n    lineHeight: '1rem',\n    color: 'rgb(96, 211, 162)',\n    cursor: 'pointer'\n  },\n  currencyInput: {\n    padding: '1rem 1rem 1rem 0px',\n    textAlign: 'right',\n    border: 'none',\n    fontSize: '1.5rem',\n    fontWeight: '400',\n    width: '100%',\n    boxSizing: 'border-box',\n    appearance: 'none',\n    outline: 'none',\n    \"&:focus\": {\n      outline: 'none !important',\n    }\n  },\n  swapButton: {\n    color: '#24947A',\n    borderColor: '#24947A',\n    borderRadius: '50px',\n    float: 'right',\n    width: '100px',\n    loading: ''\n  }\n}));\n\n\n\nexport default function StakeInputPanel(props) {\n  const classes = useStyles()\n\n  const provider = new ethers.providers.Web3Provider(window.ethereum)\n  const [ETHAmount, setETHAmount] = useState('');\n  const [SYCAmount, setSYCAmount] = useState('');\n  const [ETHPrice, setETHPrice] = useState(0);\n  const [SYCPrice, setSYCPrice] = useState(0);\n  const [ratio, setRatio] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [totoken, setTotoken] = useState(true);\n  const [approveAlready, setApproveAlready] = useState(false);\n  const [networkId, setNetworkId] = useState(0);\n  const [refCode, setRefCode] = useState('');\n  useEffect(() => {\n      async function getNetworkId() {\n          const provider = new ethers.providers.Web3Provider(window.ethereum)\n          const networkId = await provider.getNetwork()\n          setNetworkId(networkId.chainId)\n      \n      }\n      async function getApproveState() {\n        const SycContract = new Contract(addresses[RINKEBY_ID].tokens.SYC, abis.erc20.abi, provider);\n        const account = await provider.listAccounts()\n        if (props.policyAddress) {\n          const approveState = await SycContract.allowance(account[0], props.policyAddress)\n          approveState.gte('5742700000000000000000000') ? setApproveAlready(true):setApproveAlready(false)\n        }\n       \n      }\n      getNetworkId();\n      getApproveState();\n  }, [props])\n\n\n  useEffect(() => {\n    const getETHPrice = async () => {\n      const priceInfo = await axios.get('https://api.binance.com/api/v3/ticker/price?symbol=ETHUSDT')\n      setETHPrice(priceInfo.data.price)\n    }\n    const getSYCPrice = async () => {\n      const SycWethExchangeContract = new Contract(addresses[RINKEBY_ID].pairs[\"SYC-WETH\"], abis.pair, provider);\n      const reserves = await SycWethExchangeContract.getReserves();\n      // reserves[0] is SYC, reserves[1] is ETHER\n      const k = reserves[0].mul(reserves[1])\n      const y = ethers.utils.parseUnits('0.997', \"ether\").add(reserves[0])\n      const x = ethers.utils.formatEther(reserves[1].sub(k.div(y)));\n      setSYCPrice(x.toString())\n    }\n    const getRatio = async () => {\n      const SycWethExchangeContract = new Contract(addresses[RINKEBY_ID].pairs[\"SYC-WETH\"], abis.pair, provider);\n      const reserves = await SycWethExchangeContract.getReserves();\n      // reserves[0] is SYC, reserves[1] is ETHER\n      // BigNumber supports only interger so we need to multiply 1000\n      const ratio = reserves[0].mul(\"10000000\").div(reserves[1]);\n      const ratioFloat = parseFloat(ratio.toString()) / 10000000;\n      setRatio(ratioFloat.toString());\n    }\n    // ratio firstttt\n    getRatio();\n    getETHPrice();\n    getSYCPrice();\n  }, [totoken])\n\n  useEffect(() => {\n    setETHAmount(props.ether/10**18);\n    if (ratio) {\n      setSYCAmount(props.ether/10**18 / ratio);\n    }\n  }, [props])\n\n  async function onProvide() {\n    try {\n      let tx;\n      setLoading(true);\n      console.log(ETHAmount, SYCAmount)\n      console.log(props.policyAddress)\n      const provider = new ethers.providers.Web3Provider(window.ethereum)\n      const signer = provider.getSigner()\n      const account = await signer.getAddress()\n      const policyContract = new Contract(props.policyAddress, abis.policy, signer)\n      const converted = ethers.utils.parseEther(SYCAmount.toString())\n      let params = {\n        value: ethers.utils.parseEther(ETHAmount.toString())\n      }\n      console.log(converted)\n      tx =  await policyContract.stakePolicy(converted, refCode, params);\n\n      // until transactionHash is mined.\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      console.log(tx);\n    } catch (err) {\n      console.log(err)\n    }\n    setLoading(false);\n  }\n\n  async function onApprove() {\n    try {\n      setLoading(true);\n      const signer = provider.getSigner()\n      const erc20Contract = new Contract(addresses[RINKEBY_ID].tokens.SYC, abis.erc20.abi, signer);\n      let tx = await erc20Contract.approve(\n        props.policyAddress,\n        '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff'\n      );\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      setApproveAlready(true);\n    } catch (err) {\n      console.log(err)\n    }\n    setLoading(false);\n  }\n\n\n    return (\n      <div>\n        <Backdrop className={classes.backdrop} open={loading} >\n                <CircularProgress color=\"inherit\" />\n        </Backdrop>\n        <Jumbotron\n                title=\"Deposit\"\n                description=\"Deposite ETH & SYC on your selected project.\" />\n        <Container className={classes.container} maxWidth='lg'>\n          <Card className={classes.root}>\n            <CardContent className={classes.CardContent}>\n              <TextField\n                    variant=\"outlined\"\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    id=\"referral\"\n                    label=\"Referral Code\"\n                    name=\"referral\"\n                    value={refCode}\n                    onChange={ e => setRefCode(e.target.value)}\n                  />\n              <Grid container className={classes.GridContainer} spacing={10}>\n                <Grid item xs={12} sm={5}>\n                \n                  <Card className={classes.disabledFormContent}>\n                    <div style={{ display: \"flex\", justifyContent: 'space-between' }}>\n                      <Typography className={classes.title} color=\"textPrimary\">\n                        Input\n                      </Typography>\n                    \n                    </div>\n                    <div style={{ display: \"flex\" }}>\n                    <input \n                    className={classes.currencyInput}\n                    placeholder=\"0.0\"\n                    value={ETHAmount}\n                    disabled\n                    style={{cursor: 'not-allowed', background: 'rgb(228, 232, 239)'}}\n                    />\n                    <Button align='right' className={classes.symbol} display='inlign'>\n                      ETH\n                    </Button>\n                    </div>\n                    \n                    <Typography className={classes.pos} color=\"textSecondary\" align='right'>\n                      {(1 / ratio).toFixed(4)} SYC per ETH\n                    </Typography>\n                  </Card>\n                </Grid>\n                <Grid item xs={12} sm={2}>\n                  <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100%'}}>\n                    <i \n                    className=\"fa fa-plus fa-2x\" \n                    />\n                  </div>\n                </Grid>\n                <Grid item xs={12} sm={5}>\n                <Card className={classes.disabledFormContent}>\n                    <div style={{ display: \"flex\", justifyContent: 'space-between' }}>\n                      <Typography className={classes.title} color=\"textPrimary\">\n                      Input\n                      </Typography>\n                    </div>\n                    <div style={{ display: \"flex\" }}>\n                    <input \n                    className={classes.currencyInput}\n                    placeholder=\"0.0\"\n                    value={SYCAmount}\n                    disabled\n                    style={{cursor: 'not-allowed', background: 'rgb(228, 232, 239)'}}\n                    />\n                    <Button align='right' className={classes.symbol} display='inlign'>\n                      SYC\n                    </Button>\n                    </div>\n                    <Typography className={classes.pos} color=\"textSecondary\" align='right'>\n                     {ratio} ETH per SYC\n                    </Typography>\n                  </Card>\n                </Grid>\n              </Grid>\n              <div style={{ 'marginRight': '0' }}>\n                <Button \n                  variant=\"outlined\" \n                  className={classes.swapButton}\n                  onClick={e => onProvide()}\n                  disabled={!approveAlready}\n                  >\n                  {!loading && 'Provide'}    \n                </Button>\n                <Button style={{ marginRight: '10px' }}\n                  variant=\"outlined\" \n                  className={classes.swapButton}\n                  onClick={e => onApprove()}\n                  disabled={approveAlready}\n                  >\n                  {!loading && 'Approve'}    \n                </Button>\n              </div> \n            </CardContent>\n          </Card>\n        </Container>\n        \n      </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}