{"ast":null,"code":"var _jsxFileName = \"/Users/sychen/thesis-app/packages/react-app/src/components/Pages/StakeItem.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Jumbotron from '../Jumbotron';\nimport styled from 'styled-components';\nimport { ethers } from \"ethers\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport { Link } from 'react-router-dom';\nexport default function StakeItem(props) {\n  const [policies, setPolicies] = useState(0);\n  const [minPremium, setminPremium] = useState(0);\n  const [totalDeposit, settotalDeposit] = useState(0);\n  const [topupValue, setTopupValue] = useState(0);\n  useEffect(() => {\n    const getPolicies = async () => {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const account = await signer.getAddress();\n      const policyFactoryContract = new Contract(addresses[RINKEBY_ID].policyFactory, abis.policyFactory, provider);\n      const policiesAddress = await policyFactoryContract.deployedPolicies(props.match.params.id);\n      const policy = new Contract(policiesAddress, abis.policy, provider);\n      const policyInfo = await policy.getSummary();\n      const stackOf = await policy.stackOf(account);\n      setminPremium(policyInfo[3]);\n      setPolicies(policyInfo);\n      settotalDeposit(stackOf.toString());\n    };\n\n    getPolicies();\n  }, []);\n\n  async function onStake(idx) {\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\n    const signer = provider.signer();\n    const policyFactoryContract = new Contract(addresses[RINKEBY_ID].policyFactory, abis.policyFactory, provider);\n    const policyAddress = await policyFactoryContract.deployedPolicies(idx);\n    const policy = new Contract(policyAddress, abis.policy, signer);\n    await policy.createStake(topupValue);\n  }\n\n  function DepositForm() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui massive form\",\n      style: {\n        marginTop: '20px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"two fields\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 25\n      }\n    }, \"Top Up\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      onChange: e => console.log(e.target.value),\n      value: topupValue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"field\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 25\n      }\n    }, \"Total Deposit\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui right labeled input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      disabled: \"disabled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui basic label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 29\n      }\n    }, \"SYC\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui submit button right floated\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, \"Stake\"));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Jumbotron, {\n    title: \"Deposit\",\n    description: \"Stake SYC on your selected project.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(DepositForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/sychen/thesis-app/packages/react-app/src/components/Pages/StakeItem.js"],"names":["React","useState","useEffect","Jumbotron","styled","ethers","Contract","RINKEBY_ID","addresses","abis","Link","StakeItem","props","policies","setPolicies","minPremium","setminPremium","totalDeposit","settotalDeposit","topupValue","setTopupValue","getPolicies","provider","providers","Web3Provider","window","ethereum","signer","getSigner","account","getAddress","policyFactoryContract","policyFactory","policiesAddress","deployedPolicies","match","params","id","policy","policyInfo","getSummary","stackOf","toString","onStake","idx","policyAddress","createStake","DepositForm","marginTop","e","console","log","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Jumbotron from '../Jumbotron';\nimport styled from 'styled-components';\nimport { ethers } from \"ethers\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport { Link } from 'react-router-dom';\n\n\n\nexport default function StakeItem(props) {\n    const [policies, setPolicies] = useState(0);\n    const [minPremium, setminPremium] = useState(0);\n    const [totalDeposit, settotalDeposit] = useState(0);\n    const [topupValue, setTopupValue] = useState(0);\n\n    useEffect(() => {\n        const getPolicies = async () => {\n            const provider = new ethers.providers.Web3Provider(window.ethereum)\n            const signer = provider.getSigner()\n            const account = await signer.getAddress()\n\n            const policyFactoryContract = new Contract(addresses[RINKEBY_ID].policyFactory, abis.policyFactory, provider)\n            const policiesAddress = await policyFactoryContract.deployedPolicies(props.match.params.id)\n            const policy = new Contract(policiesAddress, abis.policy, provider)\n            const policyInfo = await policy.getSummary()\n            const stackOf = await policy.stackOf(account)\n\n            setminPremium(policyInfo[3])\n            setPolicies(policyInfo)\n            settotalDeposit(stackOf.toString())\n        }\n\n        getPolicies();\n    }, []);\n\n    async function onStake(idx) {\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        const signer = provider.signer();\n        const policyFactoryContract = new Contract(addresses[RINKEBY_ID].policyFactory, abis.policyFactory, provider);\n        const policyAddress = await policyFactoryContract.deployedPolicies(idx);\n        const policy = new Contract(policyAddress, abis.policy, signer);\n        await policy.createStake(topupValue);\n\n    }\n\n    function DepositForm() {\n        return(\n            <div className=\"ui massive form\" style={{ marginTop: '20px'}}>\n                <div className=\"two fields\">\n                    <div className=\"field\">\n                        <label>Top Up</label>\n                        <input type=\"text\" onChange={ e => console.log(e.target.value) } value={topupValue}/>\n                    </div>\n                    <div className=\"field\">\n                        <label>Total Deposit</label>\n                        <div className=\"ui right labeled input\">\n                            <input type=\"text\" disabled=\"disabled\" />\n                            <div className=\"ui basic label\">\n                                SYC\n                            </div>   \n                        </div> \n                    </div>\n                </div>\n                <div className=\"ui submit button right floated\">Stake</div>\n                </div>\n        );\n    }\n\n\n\n    return (\n        <div>\n            <Jumbotron\n                title=\"Deposit\"\n                description=\"Stake SYC on your selected project.\" />\n\n            <DepositForm />\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}