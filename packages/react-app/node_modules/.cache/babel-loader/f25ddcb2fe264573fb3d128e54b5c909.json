{"ast":null,"code":"var _jsxFileName = \"/Users/sychen/thesis-app/packages/react-app/src/components/CurrencyInputPanel/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { ethers } from \"ethers\";\nimport styled from 'styled-components';\nimport { ChainId, Token, WETH, Fetcher, Route } from '@uniswap/sdk';\nimport Container from '@material-ui/core/Container';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Icon from '@material-ui/core/Icon';\nimport Typography from '@material-ui/core/Typography';\nimport CardActions from '@material-ui/core/CardActions';\nimport { Button, CircularProgress } from '@material-ui/core';\nimport axios from 'axios'; // const projectId = \"66fbccb2856b40b3a622d925568379e9\";\n// const projectSecret = \"275ed56f36e440e0ab7cad94a3310aae\";\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    marginTop: \"20px\"\n  },\n  root: {},\n  CardContent: {\n    backgroundColor: '#FFFFFF',\n    paddingTop: '2rem',\n    padding: '0px 2rem 2rem'\n  },\n  GridContainer: {\n    padding: '0px 30px 30px 0px'\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)'\n  },\n  title: {\n    fontSize: 14,\n    fontWeight: '600'\n  },\n  pos: {\n    marginBottom: 12\n  },\n  FormContent: {\n    padding: '0.5rem 1rem',\n    marginBottom: '1rem',\n    borderRadius: '1rem',\n    width: '100%',\n    border: '1px solid rgb(228, 232, 239)',\n    color: 'rgb(80, 80, 80)',\n    boxShadow: 'rgb(0 0 0 / 4%) 0px 1px 6px inset'\n  },\n  disabledFormContent: {\n    padding: '0.5rem 1rem',\n    marginBottom: '1rem',\n    borderRadius: '1rem',\n    width: '100%',\n    border: '1px solid rgb(228, 232, 239)',\n    color: 'rgb(80, 80, 80)',\n    boxShadow: 'rgb(0 0 0 / 4%) 0px 1px 6px inset',\n    background: 'rgb(228, 232, 239)'\n  },\n  symbol: {\n    fontSize: '1.5rem'\n  },\n  max: {\n    display: 'inline',\n    opacity: '1',\n    lineHeight: '1rem',\n    color: 'rgb(96, 211, 162)',\n    cursor: 'pointer'\n  },\n  currencyInput: {\n    padding: '1rem 1rem 1rem 0px',\n    textAlign: 'right',\n    border: 'none',\n    fontSize: '1.5rem',\n    fontWeight: '400',\n    width: '100%',\n    boxSizing: 'border-box',\n    appearance: 'none',\n    outline: 'none',\n    \"&:focus\": {\n      outline: 'none !important'\n    }\n  },\n  swapButton: {\n    color: '#24947A',\n    borderColor: '#24947A',\n    borderRadius: '50px',\n    float: 'right',\n    width: '100px',\n    fontSize: '14px',\n    loading: ''\n  }\n}));\nexport default function CurrencyInputPanel() {\n  const classes = useStyles();\n  const provider = new ethers.providers.Web3Provider(window.ethereum);\n  const [ETHAmount, setETHAmount] = useState('');\n  const [SYCAmount, setSYCAmount] = useState('');\n  const [ETHPrice, setETHPrice] = useState(0);\n  const [SYCPrice, setSYCPrice] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [totoken, setTotoken] = useState(true);\n  const [approveAlready, setApproveAlready] = useState(false);\n  const [networkId, setNetworkId] = useState(0);\n  useEffect(() => {\n    async function getNetworkId() {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const networkId = await provider.getNetwork();\n      setNetworkId(networkId.chainId);\n    }\n\n    async function getApproveState() {\n      const SycContract = new Contract(addresses[RINKEBY_ID].tokens.SYC, abis.erc20.abi, provider);\n      const account = await provider.listAccounts();\n      const approveState = await SycContract.allowance(account[0], addresses[RINKEBY_ID].implementation);\n      console.log(approveState.toString());\n      console.log(approveState.gte('5742700000000000000000000'));\n      approveState.gte('5742700000000000000000000') ? setApproveAlready(true) : setApproveAlready(false);\n    }\n\n    getNetworkId();\n    getApproveState();\n  }, []);\n  useEffect(() => {\n    const fetchPrice = async () => {\n      if (!isNaN(ETHAmount) && ETHAmount && totoken) {\n        setSYCAmount(await getPairAmount());\n      } else if (!isNaN(SYCAmount) && SYCAmount && !totoken) {\n        setETHAmount(await getPairAmount());\n      } else if (ETHAmount === '' || SYCAmount === '') {\n        setSYCAmount('');\n        setETHAmount('');\n      }\n    };\n\n    fetchPrice();\n  }, [ETHAmount, SYCAmount, totoken]);\n  useEffect(() => {\n    const getETHPrice = async () => {\n      const priceInfo = await axios.get('https://api.binance.com/api/v3/ticker/price?symbol=ETHUSDT');\n      setETHPrice(priceInfo.data.price);\n    };\n\n    const getSYCPrice = async () => {\n      const SycWethExchangeContract = new Contract(addresses[RINKEBY_ID].pairs[\"SYC-WETH\"], abis.pair, provider);\n      const reserves = await SycWethExchangeContract.getReserves(); // reserves[0] is SYC, reserves[1] is ETHER\n\n      const k = reserves[0].mul(reserves[1]);\n\n      if (totoken) {\n        const y = ethers.utils.parseUnits('0.997', \"ether\").add(reserves[0]);\n        const x = ethers.utils.formatEther(reserves[1].sub(k.div(y)));\n        setSYCPrice(x.toString());\n      } else {\n        const y = ethers.utils.parseUnits('0.997', \"ether\").add(reserves[1]);\n        const x = ethers.utils.formatEther(reserves[0].sub(k.div(y)));\n        setSYCPrice(x.toString());\n      }\n    };\n\n    getETHPrice();\n    getSYCPrice();\n  }, [totoken]);\n\n  async function getPairAmount() {\n    try {\n      const SycWethExchangeContract = new Contract(addresses[RINKEBY_ID].pairs[\"SYC-WETH\"], abis.pair, provider);\n      const reserves = await SycWethExchangeContract.getReserves(); // reserves[0] is SYC, reserves[1] is ETHER\n\n      const k = reserves[0].mul(reserves[1]);\n      let ETHAmountSubFee, SYCAmountSubFee, x, y; // fee to dev 0.3%\n\n      if (totoken) {\n        ETHAmountSubFee = (parseFloat(ETHAmount) * 0.997).toString();\n        y = ethers.utils.parseUnits(ETHAmountSubFee, \"ether\").add(reserves[1]);\n        x = ethers.utils.formatEther(reserves[0].sub(k.div(y)));\n      } else {\n        SYCAmountSubFee = (parseFloat(SYCAmount) * 0.997).toString();\n        y = ethers.utils.parseUnits(SYCAmountSubFee, \"ether\").add(reserves[0]);\n        x = ethers.utils.formatEther(reserves[1].sub(k.div(y)));\n      }\n\n      return x.toString();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  function changeDirection() {\n    setTotoken(!totoken);\n    setSYCAmount('');\n    setETHAmount('');\n  }\n\n  async function onSwap() {\n    try {\n      let tx;\n      setLoading(true);\n      const signer = provider.getSigner();\n      const implemetationContract = new Contract(addresses[RINKEBY_ID].implementation, abis.implemetation, signer);\n\n      if (totoken) {\n        tx = await implemetationContract.swapETHToSyc({\n          value: ethers.utils.parseEther(ETHAmount)\n        });\n      } else {\n        tx = await implemetationContract.swapSycForETH(ethers.utils.parseEther(SYCAmount));\n      } // until transactionHash is mined.\n\n\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      console.log(tx);\n    } catch (err) {\n      console.log(err);\n    }\n\n    setLoading(false);\n  }\n\n  async function onApprove() {\n    try {\n      setLoading(true);\n      const signer = provider.getSigner();\n      const erc20Contract = new Contract(addresses[RINKEBY_ID].tokens.SYC, abis.erc20.abi, signer);\n      let tx = await erc20Contract.approve(addresses[RINKEBY_ID].implementation, '5742700000000000000000000000');\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      setApproveAlready(true);\n    } catch (err) {\n      console.log(err);\n    }\n\n    setLoading(false);\n  }\n\n  async function onMax() {\n    const signer = provider.getSigner();\n    const account = await signer.getAddress();\n    const balance = await provider.getBalance(account);\n    setETHAmount(ethers.utils.formatEther(balance.toString()));\n  }\n\n  if (totoken) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      className: classes.container,\n      maxWidth: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardContent, {\n      className: classes.CardContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      className: classes.GridContainer,\n      spacing: 10,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classes.FormContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: 'space-between'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: classes.title,\n      color: \"textPrimary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 23\n      }\n    }, \"Amount\"), /*#__PURE__*/React.createElement(Button, {\n      className: classes.max,\n      onClick: e => {\n        onMax();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 23\n      }\n    }, \"Max\")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: classes.currencyInput,\n      placeholder: \"0\",\n      onChange: e => setETHAmount(e.target.value),\n      value: ETHAmount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      align: \"right\",\n      className: classes.symbol,\n      display: \"inlign\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 21\n      }\n    }, \"ETH\")), /*#__PURE__*/React.createElement(Typography, {\n      className: classes.pos,\n      color: \"textSecondary\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 21\n      }\n    }, \"~$\", (ETHPrice * ETHAmount).toFixed(2)))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-exchange-alt fa-2x\",\n      onClick: e => changeDirection(false),\n      style: {\n        cursor: 'pointer'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 5,\n      style: {\n        cursor: 'not-allowed'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classes.disabledFormContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      disabled: true,\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: classes.title,\n      color: \"textPrimary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 23\n      }\n    }, \"Amount to be received (estimated)\")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: classes.currencyInput,\n      disabled: true,\n      style: {\n        cursor: 'not-allowed',\n        background: 'rgb(228, 232, 239)'\n      },\n      value: SYCAmount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      align: \"right\",\n      className: classes.symbol,\n      display: \"inlign\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 21\n      }\n    }, \"SYC\")), /*#__PURE__*/React.createElement(Typography, {\n      className: classes.pos,\n      color: \"textSecondary\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 21\n      }\n    }, \"1 SYC = \", parseFloat(SYCPrice).toFixed(4), \" ETH\")))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        'marginRight': '0'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outlined\",\n      className: classes.swapButton,\n      onClick: e => onSwap(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 17\n      }\n    }, loading && /*#__PURE__*/React.createElement(CircularProgress, {\n      size: 14,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 31\n      }\n    }), !loading && 'SWAP'))))));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      className: classes.container,\n      maxWidth: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CardContent, {\n      className: classes.CardContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      className: classes.GridContainer,\n      spacing: 10,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classes.FormContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: 'space-between'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: classes.title,\n      color: \"textPrimary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 21\n      }\n    }, \"Amount\"), /*#__PURE__*/React.createElement(Button, {\n      className: classes.max,\n      onClick: e => {\n        onMax();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 21\n      }\n    }, \"Max\")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: classes.currencyInput,\n      placeholder: \"0\",\n      onChange: e => setSYCAmount(e.target.value),\n      value: SYCAmount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      align: \"right\",\n      className: classes.symbol,\n      display: \"inlign\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 19\n      }\n    }, \"SYC\")), /*#__PURE__*/React.createElement(Typography, {\n      className: classes.pos,\n      color: \"textSecondary\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 19\n      }\n    }, \"~$\", (SYCAmount * ETHPrice / SYCPrice).toFixed(2)))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-exchange-alt fa-2x\",\n      onClick: e => changeDirection(false),\n      style: {\n        cursor: 'pointer'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 5,\n      style: {\n        cursor: 'not-allowed'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classes.disabledFormContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      disabled: true,\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: classes.title,\n      color: \"textPrimary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 21\n      }\n    }, \"Amount to be received (estimated)\")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: classes.currencyInput,\n      disabled: true,\n      style: {\n        cursor: 'not-allowed',\n        background: 'rgb(228, 232, 239)'\n      },\n      value: ETHAmount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      align: \"right\",\n      className: classes.symbol,\n      display: \"inlign\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 19\n      }\n    }, \"ETH\")), /*#__PURE__*/React.createElement(Typography, {\n      className: classes.pos,\n      color: \"textSecondary\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 19\n      }\n    }, \"1 ETH = \", parseFloat(SYCPrice).toFixed(4), \" SYC\")))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginRight: '0'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outlined\",\n      className: classes.swapButton,\n      onClick: e => onSwap(),\n      disabled: !approveAlready,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 13\n      }\n    }, \"SWAP\"), /*#__PURE__*/React.createElement(Button, {\n      style: {\n        marginRight: '10px'\n      },\n      variant: \"outlined\",\n      className: classes.swapButton,\n      onClick: e => onApprove(),\n      disabled: approveAlready,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 13\n      }\n    }, \"Approve\"))))));\n  }\n}","map":{"version":3,"sources":["/Users/sychen/thesis-app/packages/react-app/src/components/CurrencyInputPanel/index.js"],"names":["React","useState","useEffect","RINKEBY_ID","addresses","abis","Contract","ethers","styled","ChainId","Token","WETH","Fetcher","Route","Container","Card","CardContent","makeStyles","Grid","TextField","Icon","Typography","CardActions","Button","CircularProgress","axios","useStyles","theme","container","marginTop","root","backgroundColor","paddingTop","padding","GridContainer","bullet","display","margin","transform","title","fontSize","fontWeight","pos","marginBottom","FormContent","borderRadius","width","border","color","boxShadow","disabledFormContent","background","symbol","max","opacity","lineHeight","cursor","currencyInput","textAlign","boxSizing","appearance","outline","swapButton","borderColor","float","loading","CurrencyInputPanel","classes","provider","providers","Web3Provider","window","ethereum","ETHAmount","setETHAmount","SYCAmount","setSYCAmount","ETHPrice","setETHPrice","SYCPrice","setSYCPrice","setLoading","totoken","setTotoken","approveAlready","setApproveAlready","networkId","setNetworkId","getNetworkId","getNetwork","chainId","getApproveState","SycContract","tokens","SYC","erc20","abi","account","listAccounts","approveState","allowance","implementation","console","log","toString","gte","fetchPrice","isNaN","getPairAmount","getETHPrice","priceInfo","get","data","price","getSYCPrice","SycWethExchangeContract","pairs","pair","reserves","getReserves","k","mul","y","utils","parseUnits","add","x","formatEther","sub","div","ETHAmountSubFee","SYCAmountSubFee","parseFloat","err","changeDirection","onSwap","tx","signer","getSigner","implemetationContract","implemetation","swapETHToSyc","value","parseEther","swapSycForETH","waitForTransaction","hash","onApprove","erc20Contract","approve","onMax","getAddress","balance","getBalance","justifyContent","e","target","toFixed","alignItems","height","marginRight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { ethers } from \"ethers\";\nimport styled from 'styled-components';\nimport { ChainId, Token, WETH, Fetcher, Route } from '@uniswap/sdk'\nimport Container from '@material-ui/core/Container';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Icon from '@material-ui/core/Icon';\nimport Typography from '@material-ui/core/Typography';\nimport CardActions from '@material-ui/core/CardActions';\nimport { Button, CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\n\n\n\n// const projectId = \"66fbccb2856b40b3a622d925568379e9\";\n// const projectSecret = \"275ed56f36e440e0ab7cad94a3310aae\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    marginTop: \"20px\",\n  },\n  root: {\n  },\n  CardContent: {\n    backgroundColor: '#FFFFFF',\n    paddingTop: '2rem',\n    padding: '0px 2rem 2rem'\n  },\n  GridContainer: {\n    padding: '0px 30px 30px 0px'\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n    fontWeight: '600'\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  FormContent: {\n    padding: '0.5rem 1rem',\n    marginBottom: '1rem',\n    borderRadius: '1rem',\n    width: '100%',\n    border: '1px solid rgb(228, 232, 239)',\n    color: 'rgb(80, 80, 80)',\n    boxShadow: 'rgb(0 0 0 / 4%) 0px 1px 6px inset',\n  },\n  disabledFormContent: {\n    padding: '0.5rem 1rem',\n    marginBottom: '1rem',\n    borderRadius: '1rem',\n    width: '100%',\n    border: '1px solid rgb(228, 232, 239)',\n    color: 'rgb(80, 80, 80)',\n    boxShadow: 'rgb(0 0 0 / 4%) 0px 1px 6px inset',\n    background: 'rgb(228, 232, 239)'\n  },\n  symbol: {\n    fontSize: '1.5rem'\n  },\n  max: {\n    display: 'inline',\n    opacity: '1',\n    lineHeight: '1rem',\n    color: 'rgb(96, 211, 162)',\n    cursor: 'pointer'\n  },\n  currencyInput: {\n    padding: '1rem 1rem 1rem 0px',\n    textAlign: 'right',\n    border: 'none',\n    fontSize: '1.5rem',\n    fontWeight: '400',\n    width: '100%',\n    boxSizing: 'border-box',\n    appearance: 'none',\n    outline: 'none',\n    \"&:focus\": {\n      outline: 'none !important',\n    }\n  },\n  swapButton: {\n    color: '#24947A',\n    borderColor: '#24947A',\n    borderRadius: '50px',\n    float: 'right',\n    width: '100px',\n    fontSize: '14px',\n    loading: ''\n  }\n}));\n\n\n\nexport default function CurrencyInputPanel() {\n  const classes = useStyles()\n\n  const provider = new ethers.providers.Web3Provider(window.ethereum)\n  const [ETHAmount, setETHAmount] = useState('');\n  const [SYCAmount, setSYCAmount] = useState('');\n  const [ETHPrice, setETHPrice] = useState(0);\n  const [SYCPrice, setSYCPrice] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [totoken, setTotoken] = useState(true);\n  const [approveAlready, setApproveAlready] = useState(false);\n  const [networkId, setNetworkId] = useState(0);\n\n  useEffect(() => {\n      async function getNetworkId() {\n          const provider = new ethers.providers.Web3Provider(window.ethereum)\n          const networkId = await provider.getNetwork()\n          setNetworkId(networkId.chainId) \n      }\n      async function getApproveState() {\n        const SycContract = new Contract(addresses[RINKEBY_ID].tokens.SYC, abis.erc20.abi, provider);\n        const account = await provider.listAccounts()\n        const approveState = await SycContract.allowance(account[0], addresses[RINKEBY_ID].implementation)\n        console.log(approveState.toString());\n        console.log(approveState.gte('5742700000000000000000000'))\n\n        approveState.gte('5742700000000000000000000') ? setApproveAlready(true):setApproveAlready(false)\n      }\n      getNetworkId();\n      getApproveState();\n  }, [])\n\n\n\n  useEffect(() => {\n    const fetchPrice = async () => {\n      if (!isNaN(ETHAmount) && ETHAmount && totoken) {\n        setSYCAmount(await getPairAmount())\n      } else if (!isNaN(SYCAmount) && SYCAmount && !totoken) {\n        setETHAmount(await getPairAmount())\n      } else if (ETHAmount === '' || SYCAmount === '') {\n        setSYCAmount('');\n        setETHAmount('');\n      }\n    }\n    fetchPrice();\n  }, [ETHAmount, SYCAmount, totoken]);\n\n  useEffect(() => {\n    const getETHPrice = async () => {\n      const priceInfo = await axios.get('https://api.binance.com/api/v3/ticker/price?symbol=ETHUSDT')\n      setETHPrice(priceInfo.data.price)\n    }\n    const getSYCPrice = async () => {\n      const SycWethExchangeContract = new Contract(addresses[RINKEBY_ID].pairs[\"SYC-WETH\"], abis.pair, provider);\n      const reserves = await SycWethExchangeContract.getReserves();\n      // reserves[0] is SYC, reserves[1] is ETHER\n      const k = reserves[0].mul(reserves[1])\n      if (totoken) {\n        const y = ethers.utils.parseUnits('0.997', \"ether\").add(reserves[0])\n        const x = ethers.utils.formatEther(reserves[1].sub(k.div(y)));\n        setSYCPrice(x.toString())\n      } else {\n        const y = ethers.utils.parseUnits('0.997', \"ether\").add(reserves[1])\n        const x = ethers.utils.formatEther(reserves[0].sub(k.div(y)));\n        setSYCPrice(x.toString())\n      }\n    }\n    getETHPrice();\n    getSYCPrice();\n  }, [totoken])\n\n\n  async function getPairAmount() {\n    try {\n\n      const SycWethExchangeContract = new Contract(addresses[RINKEBY_ID].pairs[\"SYC-WETH\"], abis.pair, provider);\n      const reserves = await SycWethExchangeContract.getReserves();\n      // reserves[0] is SYC, reserves[1] is ETHER\n      const k = reserves[0].mul(reserves[1])\n      let ETHAmountSubFee, SYCAmountSubFee, x, y;\n      // fee to dev 0.3%\n      if (totoken) {\n        ETHAmountSubFee = (parseFloat(ETHAmount) * 0.997).toString();\n        y = ethers.utils.parseUnits(ETHAmountSubFee, \"ether\").add(reserves[1])\n        x = ethers.utils.formatEther(reserves[0].sub(k.div(y)));\n\n      } else {\n        SYCAmountSubFee = (parseFloat(SYCAmount) * 0.997).toString();\n        y = ethers.utils.parseUnits(SYCAmountSubFee, \"ether\").add(reserves[0])\n        x = ethers.utils.formatEther(reserves[1].sub(k.div(y)));\n\n      }\n      return x.toString();\n\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  function changeDirection() {\n    setTotoken(!totoken);\n    setSYCAmount('');\n    setETHAmount('');\n  }\n\n\n  async function onSwap() {\n    try {\n      let tx;\n      setLoading(true);\n      const signer = provider.getSigner()\n      const implemetationContract = new Contract(addresses[RINKEBY_ID].implementation, abis.implemetation, signer);\n      if (totoken) {\n        tx = await implemetationContract.swapETHToSyc({ value: ethers.utils.parseEther(ETHAmount) });\n      } else {\n        tx = await implemetationContract.swapSycForETH(ethers.utils.parseEther(SYCAmount));\n      }\n      // until transactionHash is mined.\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      console.log(tx);\n    } catch (err) {\n      console.log(err)\n    }\n    setLoading(false);\n  }\n\n  async function onApprove() {\n    try {\n      setLoading(true);\n      const signer = provider.getSigner()\n      const erc20Contract = new Contract(addresses[RINKEBY_ID].tokens.SYC, abis.erc20.abi, signer);\n      let tx = await erc20Contract.approve(\n        addresses[RINKEBY_ID].implementation,\n        '5742700000000000000000000000'\n      );\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      setApproveAlready(true);\n    } catch (err) {\n      console.log(err)\n    }\n    setLoading(false);\n  }\n\n  async function onMax() {\n    const signer = provider.getSigner()\n    const account = await signer.getAddress()\n    const balance = await provider.getBalance(account)\n    setETHAmount(ethers.utils.formatEther(balance.toString()))\n  }\n\n\n  if (totoken) {\n    return (\n      <div>\n        <Container className={classes.container} maxWidth='lg'>\n          <Card className={classes.root}>\n            <CardContent className={classes.CardContent}>\n              <Grid container className={classes.GridContainer} spacing={10}>\n                <Grid item xs={12} sm={5}>\n                  <Card className={classes.FormContent}>\n                    <div style={{ display: \"flex\", justifyContent: 'space-between' }}>\n                      <Typography className={classes.title} color=\"textPrimary\">\n                        Amount\n                      </Typography>\n                      <Button className={classes.max} onClick={e => {onMax()}}>\n                        Max\n                      </Button>\n                    </div>\n                    <div style={{ display: \"flex\" }}>\n                    <input \n                    className={classes.currencyInput}\n                    placeholder=\"0\"\n                    onChange={e => setETHAmount(e.target.value)}\n                    value={ETHAmount}\n                    />\n                    <Button align='right' className={classes.symbol} display='inlign'>\n                      ETH\n                    </Button>\n                    </div>\n                    \n                    <Typography className={classes.pos} color=\"textSecondary\" align='right'>\n                      ~${(ETHPrice * ETHAmount).toFixed(2)}\n                    </Typography>\n                  </Card>\n                </Grid>\n                <Grid item xs={12} sm={2}>\n                  <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100%'}}>\n                    <i \n                    className=\"fas fa-exchange-alt fa-2x\" \n                    onClick={e => changeDirection(false)}\n                    style={{cursor: 'pointer'}} />\n                  </div>\n                </Grid>\n                <Grid item xs={12} sm={5} style={{ cursor: 'not-allowed'}}>\n                <Card className={classes.disabledFormContent}>\n                    <div disabled style={{ display: \"flex\" }}>\n                      <Typography className={classes.title} color=\"textPrimary\">\n                      Amount to be received (estimated)\n                      </Typography>\n                    </div>\n                    <div style={{ display: \"flex\" }}>\n                    <input \n                    className={classes.currencyInput}\n                    disabled\n                    style={{cursor: 'not-allowed', background: 'rgb(228, 232, 239)'}}\n                    value={SYCAmount}\n                    />\n                    <Button align='right' className={classes.symbol} display='inlign'>\n                      SYC\n                    </Button>\n                    </div>\n                    \n                    <Typography className={classes.pos} color=\"textSecondary\" align='right'>\n                     1 SYC = {parseFloat(SYCPrice).toFixed(4)} ETH\n                    </Typography>\n                  </Card>\n                </Grid>\n              </Grid>\n              <div style={{ 'marginRight': '0' }}>\n                <Button \n                  variant=\"outlined\" \n                  className={classes.swapButton}\n                  onClick={e => onSwap()}\n                  >\n                  {loading && <CircularProgress size={14} />}\n                  {!loading && 'SWAP'}   \n                </Button>\n              </div> \n            </CardContent>\n          </Card>\n        </Container>\n        \n      </div>\n    );\n  } else {\n    return (\n      <div>\n      <Container className={classes.container} maxWidth='lg'>\n        <Card className={classes.root}>\n          <CardContent className={classes.CardContent}>\n            <Grid container className={classes.GridContainer} spacing={10}>\n              <Grid item xs={12} sm={5}>\n                <Card className={classes.FormContent}>\n                  <div style={{ display: \"flex\", justifyContent: 'space-between' }}>\n                    <Typography className={classes.title} color=\"textPrimary\">\n                      Amount\n                    </Typography>\n                    <Button className={classes.max} onClick={e => {onMax()}}>\n                      Max\n                    </Button>\n                  </div>\n                  <div style={{ display: \"flex\" }}>\n                  <input \n                  className={classes.currencyInput}\n                  placeholder=\"0\"\n                  onChange={e => setSYCAmount(e.target.value)}\n                  value={SYCAmount}\n                  />\n                  <Button align='right' className={classes.symbol} display='inlign'>\n                    SYC\n                  </Button>\n                  </div>\n                  \n                  <Typography className={classes.pos} color=\"textSecondary\" align='right'>\n                    ~${(SYCAmount * ETHPrice / SYCPrice ).toFixed(2)}\n                  </Typography>\n                </Card> \n              </Grid>\n              <Grid item xs={12} sm={2}>\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100%'}}>\n                  <i \n                  className=\"fas fa-exchange-alt fa-2x\"\n                  onClick={e => changeDirection(false)}\n                  style={{cursor: 'pointer'}} />\n                </div>\n              </Grid>\n              <Grid item xs={12} sm={5} style={{ cursor: 'not-allowed'}}>\n              <Card className={classes.disabledFormContent}>\n                  <div disabled style={{ display: \"flex\" }}>\n                    <Typography className={classes.title} color=\"textPrimary\">\n                    Amount to be received (estimated)\n                    </Typography>\n                  </div>\n                  <div style={{ display: \"flex\" }}>\n                  <input \n                  className={classes.currencyInput}\n                  disabled\n                  style={{cursor: 'not-allowed', background: 'rgb(228, 232, 239)'}}\n                  value={ETHAmount}\n                  />\n                  <Button align='right' className={classes.symbol} display='inlign'>\n                    ETH\n                  </Button>\n                  </div>\n                  <Typography className={classes.pos} color=\"textSecondary\" align='right'>\n                   1 ETH = {(parseFloat(SYCPrice)).toFixed(4)} SYC\n                  </Typography>\n                </Card>\n              </Grid>\n            </Grid>\n            <div style={{ marginRight: '0' }}>\n            <Button \n              variant=\"outlined\" \n              className={classes.swapButton}\n              onClick={e => onSwap()}\n              disabled={!approveAlready}\n              >SWAP\n            </Button>\n            <Button style={{ marginRight: '10px' }}\n              variant=\"outlined\" \n              className={classes.swapButton}\n              onClick={e => onApprove()}\n              disabled={approveAlready}\n              >Approve\n            </Button> \n            </div>\n          </CardContent>\n        </Card>\n      </Container>\n    </div>\n\n    )\n  }\n\n}"]},"metadata":{},"sourceType":"module"}