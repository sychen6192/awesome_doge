{"ast":null,"code":"var _jsxFileName = \"/Users/sychen/thesis-app/packages/react-app/src/components/CurrencyInputPanel/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { ethers } from \"ethers\";\nimport styled from 'styled-components';\nimport { ChainId, Token, WETH, Fetcher, Route } from '@uniswap/sdk';\nimport Container from '@material-ui/core/Container';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Icon from '@material-ui/core/Icon';\nimport Typography from '@material-ui/core/Typography';\nimport CardActions from '@material-ui/core/CardActions';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios'; // const projectId = \"66fbccb2856b40b3a622d925568379e9\";\n// const projectSecret = \"275ed56f36e440e0ab7cad94a3310aae\";\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    marginTop: \"20px\"\n  },\n  root: {},\n  CardContent: {\n    backgroundColor: '#FFFFFF',\n    paddingTop: '2rem'\n  },\n  GridContainer: {\n    padding: '0px 30px 30px'\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)'\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  },\n  FormContent: {\n    padding: '0.5rem 1rem',\n    marginBottom: '1rem',\n    borderRadius: '1rem',\n    width: '100%'\n  },\n  symbol: {\n    fontSize: '1.5rem'\n  }\n}));\nexport default function CurrencyInputPanel() {\n  const classes = useStyles();\n  const provider = new ethers.providers.Web3Provider(window.ethereum);\n  const [ETHAmount, setETHAmount] = useState('');\n  const [SYCAmount, setSYCAmount] = useState('');\n  const [ETHPrice, setETHPrice] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [totoken, setTotoken] = useState(true);\n  const [approveAlready, setApproveAlready] = useState(false);\n  useEffect(() => {\n    const fetchPrice = async () => {\n      if (!isNaN(ETHAmount) && ETHAmount && totoken) {\n        setSYCAmount(await getPairAmount());\n      } else if (!isNaN(SYCAmount) && SYCAmount && !totoken) {\n        setETHAmount(await getPairAmount());\n      } else if (ETHAmount === '' || SYCAmount === '') {\n        setSYCAmount('');\n        setETHAmount('');\n      }\n    };\n\n    fetchPrice();\n  }, [ETHAmount, SYCAmount, totoken]);\n  useEffect(() => {\n    const getETHPrice = async () => {\n      const priceInfo = await axios.get('https://api.binance.com/api/v3/ticker/price?symbol=ETHUSDT');\n      setETHPrice(priceInfo.data.price);\n    };\n\n    const getSYCPrice = async () => {\n      const SycWethExchangeContract = new Contract(addresses[RINKEBY_ID].pairs[\"SYC-WETH\"], abis.pair, provider);\n      const reserves = await SycWethExchangeContract.getReserves(); // reserves[0] is SYC, reserves[1] is ETHER\n\n      const k = reserves[0].mul(reserves[1]);\n      console.log(k.div(ethers.BigNumber.from('1000000000000000000')).toString());\n    };\n\n    getETHPrice();\n    getSYCPrice();\n  }, []);\n\n  async function getPairAmount() {\n    try {\n      const SycWethExchangeContract = new Contract(addresses[RINKEBY_ID].pairs[\"SYC-WETH\"], abis.pair, provider);\n      const reserves = await SycWethExchangeContract.getReserves(); // reserves[0] is SYC, reserves[1] is ETHER\n\n      const k = reserves[0].mul(reserves[1]);\n      let ETHAmountSubFee, SYCAmountSubFee, x, y; // fee to dev 0.3%\n\n      if (totoken) {\n        ETHAmountSubFee = (parseFloat(ETHAmount) * 0.997).toString();\n        y = ethers.utils.parseUnits(ETHAmountSubFee, \"ether\").add(reserves[1]);\n        x = ethers.utils.formatEther(reserves[0].sub(k.div(y)));\n      } else {\n        SYCAmountSubFee = (parseFloat(SYCAmount) * 0.997).toString();\n        y = ethers.utils.parseUnits(SYCAmountSubFee, \"ether\").add(reserves[0]);\n        x = ethers.utils.formatEther(reserves[1].sub(k.div(y)));\n      }\n\n      return x.toString();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  function changeDirection() {\n    setTotoken(!totoken);\n    setSYCAmount('');\n    setETHAmount('');\n  }\n\n  async function onSwap() {\n    try {\n      let tx;\n      setLoading(true);\n      const signer = provider.getSigner();\n      const implemetationContract = new Contract(addresses[RINKEBY_ID].implementation, abis.implemetation, signer);\n\n      if (totoken) {\n        tx = await implemetationContract.swapETHToSyc({\n          value: ethers.utils.parseEther(ETHAmount)\n        });\n      } else {\n        tx = await implemetationContract.swapSycForETH(ethers.utils.parseEther(SYCAmount));\n      } // until transactionHash is mined.\n\n\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      console.log(tx);\n    } catch (err) {\n      console.log(err);\n    }\n\n    setLoading(false);\n  }\n\n  async function onApprove() {\n    try {\n      setLoading(true);\n      const signer = provider.getSigner();\n      const erc20Contract = new Contract(addresses[RINKEBY_ID].tokens.SYC, abis.erc20.abi, signer);\n      let tx = await erc20Contract.approve(addresses[RINKEBY_ID].implementation, ethers.utils.parseEther(SYCAmount));\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      setApproveAlready(true);\n    } catch (err) {\n      console.log(err);\n    }\n\n    setLoading(false);\n  }\n\n  if (!provider) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 7\n      }\n    }, \"Loading...\");\n  }\n\n  if (totoken) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      className: classes.container,\n      maxWidth: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardContent, {\n      className: classes.CardContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      className: classes.GridContainer,\n      spacing: 10,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classes.FormContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: classes.title,\n      color: \"textPrimary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 23\n      }\n    }, \"Amount\"), /*#__PURE__*/React.createElement(Button, {\n      align: \"right\",\n      gutterBottom: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 23\n      }\n    }, \"Max\")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"outlined-number\",\n      type: \"number\",\n      InputLabelProps: {\n        shrink: true\n      },\n      variant: \"outlined\",\n      defaultValue: \"0\",\n      onChange: e => setETHAmount(e.target.value),\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      align: \"right\",\n      className: classes.symbol,\n      display: \"inlign\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 21\n      }\n    }, \"ETH\")), /*#__PURE__*/React.createElement(Typography, {\n      className: classes.pos,\n      color: \"textSecondary\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 21\n      }\n    }, \"~$\", (ETHPrice * ETHAmount).toFixed(2)))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      className: \"fas fa-exchange-alt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Icon, {\n      className: \"fa fa-plus-circle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: classes.FormContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: classes.title,\n      color: \"textPrimary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 23\n      }\n    }, \"Amount\")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"outlined-number\",\n      type: \"number\",\n      InputLabelProps: {\n        shrink: true\n      },\n      variant: \"outlined\",\n      value: SYCAmount,\n      disabled: true,\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      align: \"right\",\n      className: classes.symbol,\n      display: \"inlign\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 21\n      }\n    }, \"NXM\")), /*#__PURE__*/React.createElement(Typography, {\n      className: classes.pos,\n      color: \"textSecondary\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 21\n      }\n    }, \"testtest\"))))))));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui container\",\n      style: {\n        marginTop: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui big form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui grid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"field six wide column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }\n    }, \"Amount\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui right labeled input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      onChange: e => setSYCAmount(e.target.value),\n      value: SYCAmount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui dropdown label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 21\n      }\n    }, \"SYC\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"field four wide column center aligned\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"ui icon basic button\",\n      style: {\n        boxShadow: 'none'\n      },\n      onClick: changeDirection,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-exchange-alt fa-2x\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"field six wide column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }\n    }, \"Amount to be received (estimated)\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui right labeled input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      disabled: \"disabled\",\n      value: ETHAmount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ui basic label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 19\n      }\n    }, \"ETH\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: `ui submit button right floated ${loading ? 'loading' : ''} ${approveAlready ? '' : 'disabled'}`,\n      onClick: onSwap,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 13\n      }\n    }, \"Swap\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: `ui submit button right floated ${loading ? 'loading' : ''} ${approveAlready ? 'disabled' : ''}`,\n      onClick: onApprove,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 13\n      }\n    }, \"Approve\"))));\n  }\n}","map":{"version":3,"sources":["/Users/sychen/thesis-app/packages/react-app/src/components/CurrencyInputPanel/index.js"],"names":["React","useState","useEffect","RINKEBY_ID","addresses","abis","Contract","ethers","styled","ChainId","Token","WETH","Fetcher","Route","Container","Card","CardContent","makeStyles","Grid","TextField","Icon","Typography","CardActions","Button","axios","useStyles","theme","container","marginTop","root","backgroundColor","paddingTop","GridContainer","padding","bullet","display","margin","transform","title","fontSize","pos","marginBottom","FormContent","borderRadius","width","symbol","CurrencyInputPanel","classes","provider","providers","Web3Provider","window","ethereum","ETHAmount","setETHAmount","SYCAmount","setSYCAmount","ETHPrice","setETHPrice","loading","setLoading","totoken","setTotoken","approveAlready","setApproveAlready","fetchPrice","isNaN","getPairAmount","getETHPrice","priceInfo","get","data","price","getSYCPrice","SycWethExchangeContract","pairs","pair","reserves","getReserves","k","mul","console","log","div","BigNumber","from","toString","ETHAmountSubFee","SYCAmountSubFee","x","y","parseFloat","utils","parseUnits","add","formatEther","sub","err","changeDirection","onSwap","tx","signer","getSigner","implemetationContract","implementation","implemetation","swapETHToSyc","value","parseEther","swapSycForETH","waitForTransaction","hash","onApprove","erc20Contract","tokens","SYC","erc20","abi","approve","shrink","e","target","toFixed","boxShadow"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport { Contract } from \"@ethersproject/contracts\";\nimport { ethers } from \"ethers\";\nimport styled from 'styled-components';\nimport { ChainId, Token, WETH, Fetcher, Route } from '@uniswap/sdk'\nimport Container from '@material-ui/core/Container';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/Card';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport Icon from '@material-ui/core/Icon';\nimport Typography from '@material-ui/core/Typography';\nimport CardActions from '@material-ui/core/CardActions';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\n\n\n\n// const projectId = \"66fbccb2856b40b3a622d925568379e9\";\n// const projectSecret = \"275ed56f36e440e0ab7cad94a3310aae\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    marginTop: \"20px\",\n  },\n  root: {\n  },\n  CardContent: {\n    backgroundColor: '#FFFFFF',\n    paddingTop: '2rem'\n  },\n  GridContainer: {\n    padding: '0px 30px 30px'\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  FormContent: {\n    padding: '0.5rem 1rem',\n    marginBottom: '1rem',\n    borderRadius: '1rem',\n    width: '100%'\n  },\n  symbol: {\n    fontSize: '1.5rem'\n  }\n}));\n\n\n\nexport default function CurrencyInputPanel() {\n  const classes = useStyles()\n\n  const provider = new ethers.providers.Web3Provider(window.ethereum)\n  const [ETHAmount, setETHAmount] = useState('');\n  const [SYCAmount, setSYCAmount] = useState('');\n  const [ETHPrice, setETHPrice] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [totoken, setTotoken] = useState(true);\n  const [approveAlready, setApproveAlready] = useState(false);\n\n\n\n  useEffect(() => {\n    const fetchPrice = async () => {\n      if (!isNaN(ETHAmount) && ETHAmount && totoken) {\n        setSYCAmount(await getPairAmount())\n      } else if (!isNaN(SYCAmount) && SYCAmount && !totoken) {\n        setETHAmount(await getPairAmount())\n      } else if (ETHAmount === '' || SYCAmount === '') {\n        setSYCAmount('');\n        setETHAmount('');\n      }\n    }\n    fetchPrice();\n  }, [ETHAmount, SYCAmount, totoken]);\n\n  useEffect(() => {\n    const getETHPrice = async () => {\n      const priceInfo = await axios.get('https://api.binance.com/api/v3/ticker/price?symbol=ETHUSDT')\n      setETHPrice(priceInfo.data.price)\n    }\n    const getSYCPrice = async () => {\n      const SycWethExchangeContract = new Contract(addresses[RINKEBY_ID].pairs[\"SYC-WETH\"], abis.pair, provider);\n      const reserves = await SycWethExchangeContract.getReserves();\n      // reserves[0] is SYC, reserves[1] is ETHER\n      const k = reserves[0].mul(reserves[1])\n      console.log(k.div(ethers.BigNumber.from('1000000000000000000')).toString())\n    }\n    getETHPrice();\n    getSYCPrice()\n  }, [])\n\n\n  async function getPairAmount() {\n    try {\n\n      const SycWethExchangeContract = new Contract(addresses[RINKEBY_ID].pairs[\"SYC-WETH\"], abis.pair, provider);\n      const reserves = await SycWethExchangeContract.getReserves();\n      // reserves[0] is SYC, reserves[1] is ETHER\n      const k = reserves[0].mul(reserves[1])\n      let ETHAmountSubFee, SYCAmountSubFee, x, y;\n      // fee to dev 0.3%\n      if (totoken) {\n        ETHAmountSubFee = (parseFloat(ETHAmount) * 0.997).toString();\n        y = ethers.utils.parseUnits(ETHAmountSubFee, \"ether\").add(reserves[1])\n        x = ethers.utils.formatEther(reserves[0].sub(k.div(y)));\n\n      } else {\n        SYCAmountSubFee = (parseFloat(SYCAmount) * 0.997).toString();\n        y = ethers.utils.parseUnits(SYCAmountSubFee, \"ether\").add(reserves[0])\n        x = ethers.utils.formatEther(reserves[1].sub(k.div(y)));\n\n      }\n      return x.toString();\n\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  function changeDirection() {\n    setTotoken(!totoken);\n    setSYCAmount('');\n    setETHAmount('');\n  }\n\n\n  async function onSwap() {\n    try {\n      let tx;\n      setLoading(true);\n      const signer = provider.getSigner()\n      const implemetationContract = new Contract(addresses[RINKEBY_ID].implementation, abis.implemetation, signer);\n      if (totoken) {\n        tx = await implemetationContract.swapETHToSyc({ value: ethers.utils.parseEther(ETHAmount) });\n      } else {\n        tx = await implemetationContract.swapSycForETH(ethers.utils.parseEther(SYCAmount));\n      }\n      // until transactionHash is mined.\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      console.log(tx);\n    } catch (err) {\n      console.log(err)\n    }\n    setLoading(false);\n  }\n\n  async function onApprove() {\n    try {\n      setLoading(true);\n      const signer = provider.getSigner()\n      const erc20Contract = new Contract(addresses[RINKEBY_ID].tokens.SYC, abis.erc20.abi, signer);\n      let tx = await erc20Contract.approve(\n        addresses[RINKEBY_ID].implementation,\n        ethers.utils.parseEther(SYCAmount)\n      );\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      setApproveAlready(true);\n    } catch (err) {\n      console.log(err)\n    }\n    setLoading(false);\n  }\n\n  if (!provider) {\n    return (\n      <div>Loading...</div>\n    )\n  }\n\n  if (totoken) {\n    return (\n      <div>\n        <Container className={classes.container} maxWidth='lg'>\n          <Card className={classes.root}>\n            <CardContent className={classes.CardContent}>\n              <Grid container className={classes.GridContainer} spacing={10}>\n                <Grid item xs={5}>\n                  <Card className={classes.FormContent}>\n                    <div style={{ display: \"flex\" }}>\n                      <Typography className={classes.title} color=\"textPrimary\">\n                        Amount\n                      </Typography>\n                      <Button align='right' gutterBottom>\n                        Max\n                      </Button>\n                    </div>\n                    <div style={{ display: \"flex\" }}>\n                    <TextField\n                      id=\"outlined-number\"\n                      type=\"number\"\n                      InputLabelProps={{\n                        shrink: true,\n                      }}\n                      variant=\"outlined\"\n                      defaultValue='0'\n                      onChange={e => setETHAmount(e.target.value)}\n                      fullWidth\n                    />\n                    <Button align='right' className={classes.symbol} display='inlign'>\n                      ETH\n                    </Button>\n                    </div>\n                    \n                    <Typography className={classes.pos} color=\"textSecondary\" align='right'>\n                      ~${(ETHPrice * ETHAmount).toFixed(2)}\n                    </Typography>\n                  </Card>\n                </Grid>\n                <Grid item xs={2}>\n                  <Icon className=\"fas fa-exchange-alt\" />\n                  <Icon className=\"fa fa-plus-circle\" />\n\n                </Grid>\n                <Grid item xs={5}>\n                <Card className={classes.FormContent}>\n                    <div style={{ display: \"flex\" }}>\n                      <Typography className={classes.title} color=\"textPrimary\">\n                        Amount\n                      </Typography>\n                    </div>\n                    <div style={{ display: \"flex\" }}>\n                    <TextField\n                      id=\"outlined-number\"\n                      type=\"number\"\n                      InputLabelProps={{\n                        shrink: true,\n                      }}\n                      variant=\"outlined\"\n                      value={SYCAmount}\n                      disabled\n                      fullWidth\n                    />\n                    <Button align='right' className={classes.symbol} display='inlign'>\n                      NXM\n                    </Button>\n                    </div>\n                    \n                    <Typography className={classes.pos} color=\"textSecondary\" align='right'>\n                      testtest\n                    </Typography>\n                  </Card>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Card>\n        </Container>\n      </div>\n    );\n  } else {\n    return (\n      <div>\n        <div className=\"ui container\" style={{ marginTop: \"20px\" }}>\n          <div className=\"ui big form\">\n            <div className=\"ui grid\">\n              <div className=\"field six wide column\">\n                <label>Amount</label>\n                <div className=\"ui right labeled input\">\n                  <input type=\"text\" onChange={e => setSYCAmount(e.target.value)} value={SYCAmount} />\n                  <div className=\"ui dropdown label\">\n                    <div className=\"text\">SYC</div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"field four wide column center aligned\">\n                <button className=\"ui icon basic button\" style={{ boxShadow: 'none' }} onClick={changeDirection}>\n                  <i className=\"fas fa-exchange-alt fa-2x\"></i>\n                </button>\n              </div>\n              <div className=\"field six wide column\">\n                <label>Amount to be received (estimated)</label>\n                <div className=\"ui right labeled input\">\n                  <input type=\"text\" disabled=\"disabled\" value={ETHAmount} />\n                  <div className=\"ui basic label\">\n                    ETH\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className={`ui submit button right floated ${loading ? 'loading' : ''} ${approveAlready ? '' : 'disabled'}`} onClick={onSwap}>Swap</div>\n            <div className={`ui submit button right floated ${loading ? 'loading' : ''} ${approveAlready ? 'disabled' : ''}`} onClick={onApprove}>Approve</div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n}"]},"metadata":{},"sourceType":"module"}