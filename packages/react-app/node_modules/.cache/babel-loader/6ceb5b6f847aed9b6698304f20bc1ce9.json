{"ast":null,"code":"var _jsxFileName = \"/Users/sychen/thesis-app/packages/react-app/src/components/Pages/RegisterPage.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Contract } from \"@ethersproject/contracts\";\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ethers } from \"ethers\"; // import FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\n\nimport FacebookLogin from 'react-facebook-login';\nimport Modal from '@material-ui/core/Modal';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100vh'\n  },\n  image: {\n    backgroundImage: 'url(https://source.unsplash.com/1600x900/?ethereum)',\n    backgroundRepeat: 'no-repeat',\n    backgroundColor: theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: 'cover',\n    backgroundPosition: 'center'\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\nexport default function SignInSide() {\n  const classes = useStyles();\n  const provider = new ethers.providers.Web3Provider(window.ethereum);\n  const [account, setAccount] = useState('Please connect to Metamask');\n  const [login, setLogin] = useState(false);\n  const [data, setData] = useState({\n    id: '',\n    name: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [open, setOpen] = useState(false);\n  const [refcode, setRefcode] = useState('');\n\n  const responseFacebook = response => {\n    setData(response);\n\n    if (response.accessToken) {\n      setLogin(true);\n    } else {\n      setLogin(false);\n    }\n  };\n\n  useEffect(() => {\n    async function getAccount() {\n      const signer = provider.getSigner();\n      const account = await signer.getAddress();\n      const balance = await provider.getBalance(account);\n      setAccount(account);\n    }\n\n    getAccount();\n  }, []);\n\n  async function Refcode() {\n    let refcode;\n    setLoading(true);\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\n    const signer = provider.getSigner();\n    const registryContract = new Contract(addresses[RINKEBY_ID].registry, abis.registry, signer);\n    refcode = await registryContract.getRefCode();\n    setRefcode(refcode);\n    setOpen(true);\n    return refcode;\n  }\n\n  async function Register() {\n    try {\n      let tx;\n      setLoading(true);\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      const registryContract = new Contract(addresses[RINKEBY_ID].registry, abis.registry, signer);\n      tx = await registryContract.register(data.id, data.name); // until transactionHash is mined.\n\n      await provider.waitForTransaction(tx.hash);\n      setLoading(false);\n      console.log(tx);\n    } catch (err) {\n      console.log(err);\n    }\n\n    setLoading(false);\n  }\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    component: \"main\",\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, refcode), /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: false,\n    sm: 4,\n    md: 7,\n    className: classes.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 8,\n    md: 5,\n    component: Paper,\n    elevation: 6,\n    square: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: classes.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(LockOutlinedIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, \"Register\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    id: \"address\",\n    label: \"Ethereum Address\",\n    name: \"address\",\n    value: account,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    name: \"Facebook Id\",\n    label: \"Facebook Id\",\n    id: \"uid\",\n    value: data.id,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    name: \"Facebook Name\",\n    label: \"Facebook Name\",\n    id: \"name\",\n    value: data.name,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FacebookLogin, {\n    appId: \"360104115420180\",\n    autoLoad: false,\n    fields: \"name,email\",\n    scope: \"public_profile\",\n    callback: responseFacebook,\n    cssClass: \"my-facebook-button-class\",\n    textButton: \"Connect to Facebook \\uD83E\\uDD7A\",\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: Register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, \"Register\"), /*#__PURE__*/React.createElement(Button, {\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: Refcode,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }, \"referral code\")))));\n}","map":{"version":3,"sources":["/Users/sychen/thesis-app/packages/react-app/src/components/Pages/RegisterPage.js"],"names":["React","useState","useEffect","Contract","RINKEBY_ID","addresses","abis","Avatar","Button","CssBaseline","TextField","Paper","Box","Grid","LockOutlinedIcon","Typography","makeStyles","ethers","FacebookLogin","Modal","useStyles","theme","root","height","image","backgroundImage","backgroundRepeat","backgroundColor","palette","type","grey","backgroundSize","backgroundPosition","paper","margin","spacing","display","flexDirection","alignItems","avatar","secondary","main","form","width","marginTop","submit","SignInSide","classes","provider","providers","Web3Provider","window","ethereum","account","setAccount","login","setLogin","data","setData","id","name","loading","setLoading","open","setOpen","refcode","setRefcode","responseFacebook","response","accessToken","getAccount","signer","getSigner","getAddress","balance","getBalance","Refcode","registryContract","registry","getRefCode","Register","tx","register","waitForTransaction","hash","console","log","err","handleOpen","handleClose"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Contract } from \"@ethersproject/contracts\";\nimport { RINKEBY_ID, addresses, abis } from \"@uniswap-v2-app/contracts\";\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ethers } from \"ethers\";\n// import FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\nimport FacebookLogin from 'react-facebook-login';\nimport Modal from '@material-ui/core/Modal';\n\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100vh',\n  },\n  image: {\n    backgroundImage: 'url(https://source.unsplash.com/1600x900/?ethereum)',\n    backgroundRepeat: 'no-repeat',\n    backgroundColor:\n      theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: 'cover',\n    backgroundPosition: 'center',\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function SignInSide() {\n  const classes = useStyles();\n  const provider = new ethers.providers.Web3Provider(window.ethereum)\n  const [account, setAccount] = useState('Please connect to Metamask');\n  const [login, setLogin] = useState(false);\n  const [data, setData] = useState({id:'',name: ''});\n  const [loading, setLoading] = useState(false);\n  const [open, setOpen] = useState(false);\n  const [refcode, setRefcode] = useState('');\n  \n  const responseFacebook = (response) => {\n    setData(response);\n    if (response.accessToken) {\n      setLogin(true);\n    } else {\n      setLogin(false);\n    }\n  }\n  \n  useEffect(() => {\n    async function getAccount() {\n        const signer = provider.getSigner()\n        const account = await signer.getAddress()\n        const balance = await provider.getBalance(account)\n        setAccount(account)\n      }\n      getAccount();\n    }, [])\n    \n\n    async function Refcode() {\n        let refcode;\n        setLoading(true);\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        const signer = provider.getSigner()\n        const registryContract = new Contract(addresses[RINKEBY_ID].registry, abis.registry, signer);\n        refcode = await registryContract.getRefCode()\n        setRefcode(refcode)\n        setOpen(true)\n        return refcode\n    }\n\n    async function Register() {\n        try {\n            let tx;\n            setLoading(true);\n            const provider = new ethers.providers.Web3Provider(window.ethereum);\n            const signer = provider.getSigner()\n            const registryContract = new Contract(addresses[RINKEBY_ID].registry, abis.registry, signer);\n            tx = await registryContract.register(\n                data.id,\n                data.name\n            );\n          // until transactionHash is mined.\n            await provider.waitForTransaction(tx.hash);\n            setLoading(false);\n            console.log(tx);\n            } catch (err) {\n            console.log(err)\n            }\n            setLoading(false);\n        }\n\n    const handleOpen = () => {\n      setOpen(true);\n    };\n  \n    const handleClose = () => {\n      setOpen(false);\n    };\n      \n\n  return (\n    <Grid container component=\"main\" className={classes.root}>\n      <Modal\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"simple-modal-title\"\n      aria-describedby=\"simple-modal-description\"\n    >\n      {refcode}\n    </Modal>\n      <CssBaseline />\n      <Grid item xs={false} sm={4} md={7} className={classes.image} />\n      <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\n        <div className={classes.paper}>\n          <Avatar className={classes.avatar}>\n            <LockOutlinedIcon />\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">\n            Register\n          </Typography>\n          <form className={classes.form} noValidate >\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"address\"\n              label=\"Ethereum Address\"\n              name=\"address\"\n              value={account}\n              disabled\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"Facebook Id\"\n              label=\"Facebook Id\"\n              id=\"uid\"\n              value={data.id}\n              disabled\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"Facebook Name\"\n              label=\"Facebook Name\"\n              id=\"name\"\n              value={data.name}\n              disabled\n            />\n              <Grid container>\n                <FacebookLogin\n                appId=\"360104115420180\"\n                autoLoad={false}\n                fields=\"name,email\"\n                scope=\"public_profile\"\n                callback={responseFacebook}\n                cssClass=\"my-facebook-button-class\"\n                textButton=\"Connect to Facebook ðŸ¥º\"\n                size=\"small\"\n                />\n                </Grid>\n            <Button\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={Register}\n            >\n              Register\n            </Button>\n            <Button\n              fullWidth\n              variant=\"contained\"\n              color=\"secondary\"\n              onClick={Refcode}\n            >\n              referral code\n            </Button>\n          </form>\n        </div>\n      </Grid>\n    </Grid>\n  );\n}"]},"metadata":{},"sourceType":"module"}